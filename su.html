 <!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Su Afetleri - Afet Bilinci</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0f1724 0%, #1f2937 50%, #0f1724 100%);
      color: #fff;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      transition: background 0.5s ease;
    }

    body.bg-correct {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
    }

    body.bg-wrong {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
    }

    header {
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
      padding: 18px 24px;
      box-shadow: 0 8px 32px rgba(30, 64, 175, 0.4);
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 2px solid rgba(255,255,255,0.1);
    }
    header h1 { 
      margin: 0; 
      font-size: 24px; 
      font-weight: 700;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    .nav-buttons {
      display: flex;
      gap: 10px;
    }
    .navbtn { 
      background: rgba(11, 18, 32, 0.8);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.2);
      padding: 10px 16px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    .navbtn:hover {
      background: rgba(11, 18, 32, 1);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }

    main { 
      padding: 32px 24px; 
      max-width: 1200px; 
      margin: 0 auto; 
    }

    .intro-text {
      text-align: center;
      font-size: 16px;
      color: #94a3b8;
      margin-bottom: 32px;
      padding: 16px;
      background: rgba(15, 23, 36, 0.6);
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.05);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .tile {
      background: linear-gradient(145deg, rgba(30, 41, 59, 0.8), rgba(15, 23, 42, 0.8));
      padding: 24px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      cursor: pointer;
      transition: all 0.4s ease;
      border: 2px solid transparent;
      position: relative;
    }

    .tile:hover {
      transform: translateY(-12px) scale(1.02);
      border-color: rgba(14, 165, 164, 0.5);
      box-shadow: 0 20px 40px rgba(14, 165, 164, 0.3);
    }

    .tile-icon {
      font-size: 48px;
      margin-bottom: 12px;
      display: block;
    }

    .tile h3 { 
      margin: 8px 0 12px; 
      color: #dbeafe; 
      font-size: 22px;
      font-weight: 700;
    }

    .tile p { 
      margin: 0; 
      color: #cbd5e1; 
      font-size: 14px; 
      line-height: 1.6;
    }

    .tile.selected {
      border-color: #0ea5a4;
      background: linear-gradient(145deg, rgba(14, 165, 164, 0.2), rgba(15, 23, 42, 0.9));
      box-shadow: 0 20px 40px rgba(14, 165, 164, 0.4);
    }

    #detail {
      margin-top: 32px;
      padding: 28px;
      background: linear-gradient(145deg, rgba(7, 16, 36, 0.95), rgba(15, 23, 36, 0.95));
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.7);
      border: 1px solid rgba(255,255,255,0.08);
      min-height: 300px;
    }

    #detail h2 { 
      margin-top: 0; 
      color: #e6f7ff; 
      font-size: 28px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    .info-card {
      background: rgba(14, 165, 164, 0.1);
      border-left: 4px solid #0ea5a4;
      padding: 16px;
      border-radius: 8px;
      margin: 16px 0;
      color: #e0f2f1;
      line-height: 1.7;
    }

    .btn {
      display: inline-block;
      margin: 12px 12px 0 0;
      background: linear-gradient(135deg, #0ea5a4 0%, #0891b2 100%);
      color: #042027;
      border: none;
      padding: 14px 28px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 700;
      font-size: 16px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(14, 165, 164, 0.4);
    }

    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(14, 165, 164, 0.6);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .btn.secondary { 
      background: linear-gradient(135deg, #1f6feb 0%, #3b82f6 100%);
      color: #fff;
      box-shadow: 0 4px 12px rgba(31, 111, 235, 0.4);
    }

    .game-area { 
      margin-top: 24px; 
      background: linear-gradient(145deg, rgba(7, 17, 38, 0.9), rgba(2, 16, 36, 0.9));
      padding: 28px; 
      border-radius: 16px;
      border: 1px solid rgba(14, 165, 164, 0.3);
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 20px;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #0ea5a4, #22c55e);
      transition: width 0.5s ease;
      box-shadow: 0 0 10px rgba(14, 165, 164, 0.8);
    }

    .q { 
      font-size: 20px; 
      margin-bottom: 24px; 
      color: #e6f7ff; 
      font-weight: 600;
      line-height: 1.6;
      padding: 16px;
      background: rgba(14, 165, 164, 0.05);
      border-radius: 12px;
      border-left: 4px solid #0ea5a4;
    }

    .choice { 
      display: block; 
      width: 100%; 
      text-align: left; 
      margin: 12px 0; 
      padding: 16px 20px; 
      background: linear-gradient(135deg, rgba(9, 34, 58, 0.8), rgba(7, 25, 45, 0.8));
      color: #dbeafe; 
      border-radius: 12px; 
      border: 2px solid rgba(255,255,255,0.1);
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 16px;
      font-weight: 500;
    }

    .choice:hover { 
      transform: translateX(8px);
      background: linear-gradient(135deg, rgba(14, 165, 164, 0.2), rgba(9, 34, 58, 0.9));
      border-color: rgba(14, 165, 164, 0.5);
    }

    .choice:disabled {
      cursor: not-allowed;
      opacity: 0.6;
    }

    .result { 
      font-size: 18px; 
      margin-top: 20px; 
      color: #f1f5f9;
      line-height: 1.8;
    }

    .result ul {
      background: rgba(0,0,0,0.3);
      padding: 20px 20px 20px 40px;
      border-radius: 12px;
      margin-top: 16px;
    }

    .result li {
      margin-bottom: 16px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .score-display {
      display: inline-block;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: white;
      padding: 12px 24px;
      border-radius: 12px;
      font-size: 24px;
      font-weight: 700;
      margin: 16px 0;
      box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);
    }

    .congrats {
      font-size: 48px;
      text-align: center;
      margin: 20px 0;
    }

    @media(max-width: 768px) {
      header h1 { font-size: 18px; }
      .tile h3 { font-size: 18px; }
      .q { font-size: 18px; }
      main { padding: 20px 16px; }
    }
  </style>
</head>
<body>

  <header>
    <h1>ğŸŒŠ Su Afetleri - Yeni Nesil EÄŸitim</h1>
    <div class="nav-buttons">
      <button class="navbtn" id="homeBtn">ğŸ  Ana Sayfa</button>
      <button class="navbtn" id="aboutBtn">â„¹ï¸ HakkÄ±nda</button>
    </div>
  </header>

  <main>
    <div class="intro-text">
      ğŸ¯ <strong>AÅŸaÄŸÄ±dan bir afet tÃ¼rÃ¼ seÃ§:</strong> Bilgi kartÄ±nÄ± okuyarak Ã¶ÄŸren veya "Oyna" butonuyla 5 soruluk interaktif testi baÅŸlat!
    </div>

    <div class="grid" id="tiles">
      <div class="tile" id="tile-sel">
        <span class="tile-icon">ğŸŒŠ</span>
        <h3>Sel</h3>
        <p>Ani su baskÄ±nlarÄ±, su seviyesi yÃ¼kselmeleri ve tahliye yÃ¶ntemleri hakkÄ±nda bilgiler.</p>
      </div>

      <div class="tile" id="tile-tsunami">
        <span class="tile-icon">ğŸŒ…</span>
        <h3>Tsunami</h3>
        <p>Deniz tabanÄ±ndaki depremlerin neden olduÄŸu dev dalgalar ve kaÃ§Ä±ÅŸ senaryolarÄ±.</p>
      </div>

      <div class="tile" id="tile-firtina">
        <span class="tile-icon">ğŸŒ€</span>
        <h3>Åiddetli FÄ±rtÄ±na</h3>
        <p>Åiddetli yaÄŸmur, rÃ¼zgar ve fÄ±rtÄ±na dalgalarÄ±na karÅŸÄ± korunma yÃ¶ntemleri.</p>
      </div>
    </div>

    <div id="detail">
      <h2 id="detailTitle">ğŸ® Bir Afet TÃ¼rÃ¼ SeÃ§in</h2>
      <p id="detailText" style="color:#94a3b8; font-size:16px;">YukarÄ±daki kartlardan birini seÃ§erek bilgi alabilir veya oyunu baÅŸlatabilirsiniz.</p>

      <div id="detailButtons"></div>

      <div id="game" class="game-area" style="display:none;">
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill" style="width:0%"></div>
        </div>
        <div id="qbox"></div>
        <div id="choicesBox"></div>
        <div id="after" style="display:none;">
          <div class="result" id="resultText"></div>
          <button class="btn secondary" id="backBtn">ğŸ”™ BaÅŸka Afet SeÃ§</button>
        </div>
      </div>
    </div>
  </main>

<script>
  var data = {
    sel: [
      { q: "Sel sularÄ± iÃ§inde yÃ¼rÃ¼meye Ã§alÄ±ÅŸmak neden tehlikelidir?", opts: ["15 cm derinlikteki su bile sizi sÃ¼rÃ¼kleyebilir", "Sadece ayaklarÄ±nÄ±z Ä±slanÄ±r", "Su temiz olduÄŸu iÃ§in gÃ¼venlidir"], a: 0, explain: "15 cm derinlikteki hÄ±zlÄ± akan su bile insanÄ± devirebilir." },
      { q: "Sel uyarÄ±sÄ± aldÄ±ÄŸÄ±nÄ±zda ne yapmalÄ±sÄ±nÄ±z?", opts: ["YÃ¼ksek yerlere Ã§Ä±kÄ±n ve araÃ§ kullanmayÄ±n", "Hemen arabanÄ±zla kaÃ§maya Ã§alÄ±ÅŸÄ±n", "Sel sularÄ±nÄ± izlemek iÃ§in dÄ±ÅŸarÄ± Ã§Ä±kÄ±n"], a: 0, explain: "Sel sularÄ± araÃ§larÄ± sÃ¼rÃ¼kleyebilir, yÃ¼ksek yerlere Ã§Ä±kmak en gÃ¼venlisidir." },
      { q: "Sel sularÄ± elektrik direklerine ulaÅŸtÄ±ÄŸÄ±nda ne yapmalÄ±sÄ±nÄ±z?", opts: ["Elektrik Ã§arpma riski olduÄŸundan sudan uzak durun", "Suya girmek gÃ¼venlidir Ã§Ã¼nkÃ¼ elektrik iletmez", "Elektrik direklerini kontrol etmek iÃ§in yaklaÅŸÄ±n"], a: 0, explain: "Sel sularÄ± elektriÄŸi iletebilir ve Ã¶lÃ¼mcÃ¼l elektrik Ã§arpmasÄ±na neden olabilir." },
      { q: "Selden sonra evinize dÃ¶ndÃ¼ÄŸÃ¼nÃ¼zde ne yapmalÄ±sÄ±nÄ±z?", opts: ["Elektrik ve gaz sistemlerini kontrol ettirmeden girmeyin", "Hemen temizliÄŸe baÅŸlayÄ±n", "EÅŸyalarÄ±nÄ±zÄ± kurtarmak iÃ§in hemen iÃ§eri girin"], a: 0, explain: "Gaz kaÃ§aÄŸÄ± ve elektrik Ã§arpmasÄ± riski vardÄ±r, yetkililerin kontrolÃ¼ gerekir." },
      { q: "Sel sÄ±rasÄ±nda araÃ§taysanÄ±z ne yapmalÄ±sÄ±nÄ±z?", opts: ["AracÄ± terk edip yÃ¼ksek yere Ã§Ä±kÄ±n", "AracÄ±n iÃ§inde bekleyin", "HÄ±zla sel sularÄ±ndan geÃ§meye Ã§alÄ±ÅŸÄ±n"], a: 0, explain: "AraÃ§lar sel sularÄ±nda yÃ¼zmeye baÅŸlayabilir ve sÃ¼rÃ¼klenebilir." }
    ],
    tsunami: [
      { q: "Tsunami uyarÄ±sÄ± verildiÄŸinde ne yapmalÄ±sÄ±nÄ±z?", opts: ["Hemen yÃ¼ksek yerlere veya Ã¼st katlara Ã§Ä±kÄ±n", "Sahile inip dalgalarÄ± izleyin", "Evde kalÄ±p bekleyin"], a: 0, explain: "Tsunami dalgalarÄ± Ã§ok hÄ±zlÄ± gelir ve sahili hÄ±zla kaplar." },
      { q: "Deniz aniden Ã§ekildiÄŸinde bu ne anlama gelir?", opts: ["Tsunami Ã¶ncÃ¼ belirtisidir, hemen yÃ¼ksek yere kaÃ§Ä±n", "BalÄ±klarÄ± toplamak iÃ§in iyi bir fÄ±rsattÄ±r", "Normal bir gelgit olayÄ±dÄ±r"], a: 0, explain: "Denizin aniden Ã§ekilmesi tsunami Ã¶ncÃ¼ belirtisidir, hemen yÃ¼ksek yere Ã§Ä±kÄ±lmalÄ±dÄ±r." },
      { q: "Tsunami dalgalarÄ± kaÃ§ kez gelebilir?", opts: ["Birden fazla dalga gelebilir, ilk dalgadan sonra gÃ¼vende deÄŸilsiniz", "Sadece bir dalga gelir", "En fazla iki dalga gelir"], a: 0, explain: "Tsunamilerde birden fazla dalga gelebilir, genellikle en bÃ¼yÃ¼k dalga ilk dalga deÄŸildir." },
      { q: "Tsunamiden sonra ne zaman sahile dÃ¶nmek gÃ¼venlidir?", opts: ["Yetkililer izin verene kadar bekleyin", "Dalgalar durur durmaz", "1 saat sonra"], a: 0, explain: "Yetkililer bÃ¶lgenin gÃ¼venli olduÄŸunu aÃ§Ä±klayana kadar sahile dÃ¶nmeyin." },
      { q: "Tsunami sÄ±rasÄ±nda en gÃ¼venli yer neresidir?", opts: ["MÃ¼mkÃ¼n olduÄŸunca yÃ¼ksek ve iÃ§ kesimler", "Sahile yakÄ±n binalarÄ±n alt katlarÄ±", "ArabanÄ±n iÃ§i"], a: 0, explain: "Tsunami dalgalarÄ± sahili ve alÃ§ak bÃ¶lgeleri kaplar, yÃ¼ksek ve iÃ§ kesimler daha gÃ¼venlidir." }
    ],
    firtina: [
      { q: "Åiddetli fÄ±rtÄ±na sÄ±rasÄ±nda en gÃ¼venli yer neresidir?", opts: ["KapalÄ± ve saÄŸlam bir binanÄ±n iÃ§ kÄ±sÄ±mlarÄ±", "AÃ§Ä±k alanlar", "ArabanÄ±n yanÄ±nda"], a: 0, explain: "KapalÄ± ve saÄŸlam binalarÄ±n iÃ§ kÄ±sÄ±mlarÄ± fÄ±rtÄ±nadan en iyi korunan yerlerdir." },
      { q: "FÄ±rtÄ±na sÄ±rasÄ±nda pencerelerden neden uzak durmalÄ±sÄ±nÄ±z?", opts: ["KÄ±rÄ±lan camlar yaralanmalara neden olabilir", "Pencereler sÄ±cak tutar", "Pencerelerden dÄ±ÅŸarÄ±yÄ± gÃ¶rmek tehlikelidir"], a: 0, explain: "FÄ±rtÄ±na sÄ±rasÄ±nda kÄ±rÄ±lan pencereler uÃ§an cam parÃ§alarÄ± ciddi yaralanmalara yol aÃ§abilir." },
      { q: "FÄ±rtÄ±na sÄ±rasÄ±nda elektrikli aletleri kullanmak neden tehlikelidir?", opts: ["YÄ±ldÄ±rÄ±m Ã§arpmasÄ± elektrik sistemine zarar verebilir", "Elektrik kesintisi olur", "Aletler bozulabilir"], a: 0, explain: "YÄ±ldÄ±rÄ±m Ã§arpmasÄ± elektrik sistemine zarar vererek yangÄ±n veya elektrik Ã§arpmasÄ±na neden olabilir." },
      { q: "FÄ±rtÄ±na uyarÄ±sÄ± aldÄ±ÄŸÄ±nÄ±zda dÄ±ÅŸarÄ±daysanÄ±z ne yapmalÄ±sÄ±nÄ±z?", opts: ["En yakÄ±n saÄŸlam binaya sÄ±ÄŸÄ±nÄ±n", "AÄŸaÃ§ altÄ±nda bekleyin", "HÄ±zlÄ±ca eve koÅŸun"], a: 0, explain: "AÃ§Ä±k alanlar ve aÄŸaÃ§ altlarÄ± yÄ±ldÄ±rÄ±m Ã§arpmasÄ± riski taÅŸÄ±r, en yakÄ±n binaya sÄ±ÄŸÄ±nmak gÃ¼venlidir." },
      { q: "FÄ±rtÄ±na sonrasÄ± dÄ±ÅŸarÄ± Ã§Ä±ktÄ±ÄŸÄ±nÄ±zda nelere dikkat etmelisiniz?", opts: ["DevrilmiÅŸ aÄŸaÃ§lara, kopan elektrik tellerine dikkat edin", "Hemen normal hayata dÃ¶nÃ¼n", "Sadece yollara bakÄ±n"], a: 0, explain: "FÄ±rtÄ±na sonrasÄ± devrilen aÄŸaÃ§lar ve kopan elektrik telleri bÃ¼yÃ¼k risk oluÅŸturur." }
    ]
  };

  var currentType = null;
  var sceneIndex = 0;
  var score = 0;
  var mistakes = [];
  var isAnswering = false;

  function selectDisaster(type) {
    currentType = type;
    sceneIndex = 0;
    score = 0;
    mistakes = [];
    isAnswering = false;

    var tiles = document.querySelectorAll('.tile');
    for (var i = 0; i < tiles.length; i++) {
      tiles[i].classList.remove('selected');
    }
    document.getElementById('tile-' + type).classList.add('selected');

    var titles = {
      sel: "ğŸŒŠ Sel",
      tsunami: "ğŸŒ… Tsunami",
      firtina: "ğŸŒ€ Åiddetli FÄ±rtÄ±na"
    };

    var infos = {
      sel: "Sel sularÄ± iÃ§inde yÃ¼rÃ¼mek tehlikelidir. <strong>15 cm derinlikteki su bile sizi sÃ¼rÃ¼kleyebilir</strong>. YÃ¼ksek yerlere Ã§Ä±kÄ±n ve araÃ§ kullanmayÄ±n.",
      tsunami: "Deniz aniden Ã§ekilirse bu <strong>tsunami Ã¶ncÃ¼ belirtisidir</strong>. Hemen yÃ¼ksek yerlere kaÃ§Ä±n. Ä°lk dalgadan sonra gÃ¼vende deÄŸilsiniz.",
      firtina: "Åiddetli fÄ±rtÄ±na sÄ±rasÄ±nda <strong>kapalÄ± ve saÄŸlam bir binanÄ±n iÃ§ kÄ±sÄ±mlarÄ±nda</strong> kalÄ±n. Pencerelerden uzak durun."
    };

    document.getElementById('detailTitle').innerHTML = titles[type];
    document.getElementById('detailText').innerHTML = '<div class="info-card">' + infos[type] + '</div>';

    var db = document.getElementById('detailButtons');
    db.innerHTML = '';

    var playBtn = document.createElement('button');
    playBtn.className = 'btn';
    playBtn.innerHTML = 'â–¶ï¸ Oyunu BaÅŸlat';
    playBtn.addEventListener('click', function() {
      startGame(type);
    });
    db.appendChild(playBtn);

    var infoBtn = document.createElement('button');
    infoBtn.className = 'btn secondary';
    infoBtn.innerHTML = 'ğŸ“‹ DetaylÄ± Bilgi';
    infoBtn.addEventListener('click', function() {
      showInfoCard(type);
    });
    db.appendChild(infoBtn);

    document.getElementById('game').style.display = 'none';
    document.getElementById('after').style.display = 'none';
  }

  function showInfoCard(type) {
    var detailedInfo = {
      sel: "<h3 style='color:#0ea5a4;'>ğŸ“š Sel HakkÄ±nda</h3><p>Ani ve ÅŸiddetli yaÄŸÄ±ÅŸlar sonucu su seviyesinin hÄ±zla yÃ¼kselmesiyle oluÅŸur.</p><ul style='text-align:left;'><li><strong>Ã–ncesi:</strong> YÃ¼ksek yerlere Ã§Ä±kma planÄ± yapÄ±n</li><li><strong>SÄ±rasÄ±nda:</strong> Sel sularÄ±na girmeyin, araÃ§ kullanmayÄ±n</li><li><strong>SonrasÄ±:</strong> Elektrik ve gaz sistemlerini kontrol ettirin</li></ul>",
      tsunami: "<h3 style='color:#0ea5a4;'>ğŸ“š Tsunami HakkÄ±nda</h3><p>Deniz tabanÄ±ndaki depremler, volkanik patlamalar veya heyelanlar sonucu oluÅŸan dev dalgalardÄ±r.</p><ul style='text-align:left;'><li><strong>Belirti:</strong> Denizin aniden Ã§ekilmesi</li><li><strong>Tehlike:</strong> HÄ±zla yÃ¼ksek yerlere kaÃ§Ä±n</li><li><strong>SonrasÄ±:</strong> Yetkililer izin verene kadar sahile dÃ¶nmeyin</li></ul>",
      firtina: "<h3 style='color:#0ea5a4;'>ğŸ“š Åiddetli FÄ±rtÄ±na HakkÄ±nda</h3><p>Åiddetli rÃ¼zgar, yaÄŸmur ve bazen fÄ±rtÄ±na dalgalarÄ±yla karakterize olan meteorolojik afetlerdir.</p><ul style='text-align:left;'><li><strong>Ã–nlem:</strong> Pencerelerden uzak durun, elektrikli aletleri kullanmayÄ±n</li><li><strong>GÃ¼venli yer:</strong> BinanÄ±n iÃ§ kÄ±sÄ±mlarÄ±</li><li><strong>SonrasÄ±:</strong> Devrilen aÄŸaÃ§lara ve kopan elektrik tellerine dikkat edin</li></ul>"
    };

    document.getElementById('detailText').innerHTML = '<div class="info-card">' + detailedInfo[type] + '</div>';
  }

  function startGame(type) {
    currentType = type;
    sceneIndex = 0;
    score = 0;
    mistakes = [];
    isAnswering = false;

    document.getElementById('game').style.display = 'block';
    document.getElementById('after').style.display = 'none';
    renderScene();
  }

  function renderScene() {
    var scenes = data[currentType];
    if (!scenes) return;

    if (sceneIndex >= scenes.length) {
      return finishGame();
    }

    var scene = scenes[sceneIndex];
    var progress = ((sceneIndex + 1) / scenes.length) * 100;
    document.getElementById('progressFill').style.width = progress + '%';

    var qbox = document.getElementById('qbox');
    qbox.innerHTML = '<div class="q">Soru ' + (sceneIndex + 1) + ' / ' + scenes.length + ': ' + scene.q + '</div>';

    var choicesBox = document.getElementById('choicesBox');
    choicesBox.innerHTML = '';

    for (var i = 0; i < scene.opts.length; i++) {
      var btn = document.createElement('button');
      btn.className = 'choice';
      btn.textContent = scene.opts[i];
      btn.setAttribute('data-index', i);
      btn.addEventListener('click', function() {
        if (!isAnswering) {
          var selectedIndex = parseInt(this.getAttribute('data-index'));
          chooseAnswer(selectedIndex);
        }
      });
      choicesBox.appendChild(btn);
    }
  }

  function chooseAnswer(selectedIndex) {
    if (isAnswering) return;
    isAnswering = true;

    var scene = data[currentType][sceneIndex];
    var isCorrect = (selectedIndex === scene.a);

    var choices = document.querySelectorAll('.choice');
    for (var i = 0; i < choices.length; i++) {
      choices[i].disabled = true;
    }

    var body = document.body;
    if (isCorrect) {
      body.classList.add('bg-correct');
      score++;
    } else {
      body.classList.add('bg-wrong');
      mistakes.push({
        index: sceneIndex + 1,
        q: scene.q,
        selected: scene.opts[selectedIndex],
        correct: scene.opts[scene.a],
        why: scene.explain
      });
    }

    setTimeout(function() {
      body.classList.remove('bg-correct', 'bg-wrong');
      sceneIndex++;
      isAnswering = false;
      renderScene();
    }, 1000);
  }

  function finishGame() {
    document.getElementById('game').style.display = 'block';
    document.getElementById('after').style.display = 'block';
    document.getElementById('qbox').innerHTML = '';
    document.getElementById('choicesBox').innerHTML = '';

    var total = data[currentType].length;
    var res = document.getElementById('resultText');
    var txt = '';

    if (mistakes.length === 0) {
      txt = '<div class="congrats">ğŸ‰</div><div class="score-display">MÃ¼kemmel: ' + score + '/' + total + '</div><p>Tebrikler! TÃ¼m sorular doÄŸru!</p>';
    } else {
      txt = '<div class="score-display">Skor: ' + score + '/' + total + '</div>';
      txt += '<p><strong>YanlÄ±ÅŸ yaptÄ±ÄŸÄ±n sorular:</strong></p><ul style="text-align:left;">';
      for (var i = 0; i < mistakes.length; i++) {
        var m = mistakes[i];
        txt += '<li><b>Soru ' + m.index + ':</b> ' + m.q + '<br>';
        txt += '<span style="color:#ff9999">âŒ Senin cevabÄ±n: ' + m.selected + '</span><br>';
        txt += '<span style="color:#99ff99">âœ… DoÄŸru cevap: ' + m.correct + '</span><br>';
        txt += '<small style="color:#9aa5b1">ğŸ’¡ ' + m.why + '</small></li>';
      }
      txt += '</ul>';
    }
    res.innerHTML = txt;
  }

  function backToSelection() {
    document.getElementById('game').style.display = 'none';
    document.getElementById('after').style.display = 'none';
    document.getElementById('detailTitle').innerHTML = 'ğŸ® Bir Afet TÃ¼rÃ¼ SeÃ§in';
    document.getElementById('detailText').innerHTML = '<p style="color:#94a3b8; font-size:16px;">YukarÄ±daki kartlardan birini seÃ§erek bilgi alabilir veya oyunu baÅŸlatabilirsiniz.</p>';
    document.getElementById('detailButtons').innerHTML = '';

    var tiles = document.querySelectorAll('.tile');
    for (var i = 0; i < tiles.length; i++) {
      tiles[i].classList.remove('selected');
    }

    currentType = null;
    sceneIndex = 0;
    score = 0;
    mistakes = [];
    isAnswering = false;
  }

  document.getElementById('tile-sel').addEventListener('click', function() {
    selectDisaster('sel');
  });

  document.getElementById('tile-tsunami').addEventListener('click', function() {
    selectDisaster('tsunami');
  });

  document.getElementById('tile-firtina').addEventListener('click', function() {
    selectDisaster('firtina');
  });

  document.getElementById('homeBtn').addEventListener('click', function() {
    window.location.href = 'index.html';
  });

  document.getElementById('aboutBtn').addEventListener('click', function() {
    window.location.href = 'hakkinda.html';
  });

  document.getElementById('backBtn').addEventListener('click', backToSelection);
</script>

</body>
</html>