<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Afet Bilinci Oyunu</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      text-align: center;
      background: linear-gradient(to right, #e3f2fd, #bbdefb);
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 0 25px rgba(0,0,0,0.2);
      padding: 30px;
      width: 90%;
      max-width: 600px;
    }

    h1 {
      margin-bottom: 20px;
      color: #1a237e;
    }

    button {
      background: #1976d2;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 10px;
      font-size: 16px;
      margin: 10px;
      cursor: pointer;
      transition: all 0.2s;
    }

    button:hover {
      background: #0d47a1;
      transform: scale(1.05);
    }

    button:active {
      transform: scale(0.97);
    }

    .flash-green {
      background-color: #00c853 !important;
      animation: flashGreen 0.5s;
    }

    .flash-red {
      background-color: #d32f2f !important;
      animation: flashRed 0.5s;
    }

    @keyframes flashGreen {
      0% { background-color: #00c853; }
      100% { background-color: #1976d2; }
    }

    @keyframes flashRed {
      0% { background-color: #d32f2f; }
      100% { background-color: #1976d2; }
    }
  </style>
</head>
<body>
  <div id="container">
    <h1 id="title">Afet Bilinci Oyunu</h1>
    <div id="choices"></div>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const type = params.get("type") || "deprem";
    let step = 0;
    let score = 0;
    let mistakes = [];
    let scenes = {};
    let maxScore = 0;

    const allScenes = {
      deprem: [
        { q: "Deprem başladı! Ne yaparsın?", o: ["Camdan dışarı bakarım", "Çök, kapan, tutun!", "Hemen dışarı kaçarım"], c: 2 },
        { q: "Dolap devriliyor, ne yaparsın?", o: ["Dolabı tutarım", "Başımı korurum", "Koşarak uzaklaşırım"], c: 2 },
        { q: "Artçı sarsıntı geldi, ne yaparsın?", o: ["Yine güvenli pozisyona geçerim", "Cam kenarına geçerim", "Balkona çıkarım"], c: 1 },
        { q: "Binadan çıkarken ne yaparsın?", o: ["Asansör kullanmam", "Asansöre binerim", "Pencereden atlarım"], c: 1 },
        { q: "Toplanma alanına vardın, ne yaparsın?", o: ["Telefonla arama yaparım", "Acil durum bilgisi paylaşırım", "Eve geri dönerim"], c: 2 }
      ],
      yangin: [
        { q: "Evde yangın çıktı! Ne yaparsın?", o: ["Su dökerim", "Kaçış yolunu bulurum", "Pencereye çıkarım"], c: 2 },
        { q: "Duman yayılıyor, ne yaparsın?", o: ["Koşarım", "Eğilerek ilerlerim", "Pencereleri açarım"], c: 2 },
        { q: "Kapıya ulaştın, ne yaparsın?", o: ["Kapıyı hemen açarım", "Elimle sıcaklığı kontrol ederim", "Beklerim"], c: 2 },
        { q: "Kapı sıcaksa ne yaparsın?", o: ["Açarım", "Islak bezle kapatırım", "Pencereden çıkarım"], c: 2 },
        { q: "Yangından çıktın, ne yaparsın?", o: ["112’yi ararım", "Eşyaları almak için geri dönerim", "Yangını izlerim"], c: 1 }
      ],
      sel: [
        { q: "Sel başladı! Ne yaparsın?", o: ["Yüksek bir yere çıkarım", "Arabada beklerim", "Suya girerim"], c: 1 },
        { q: "Evdeyken su seviyesi yükseliyor, ne yaparsın?", o: ["Çatıya çıkarım", "Eşyaları kurtarırım", "Pencereden bakarım"], c: 1 },
        { q: "Yolda yürüyorsun ve su yükseliyor, ne yaparsın?", o: ["Yoldan uzaklaşırım", "Suya girerim", "Köprü altına sığınırım"], c: 1 },
        { q: "Sel sonrası ne yaparsın?", o: ["Elektrikleri kontrol ederim", "Yetkililerin talimatını beklerim", "Evde kalırım"], c: 2 },
        { q: "Su çekildi, ne yaparsın?", o: ["Eve girerim", "Temizlik yaparım", "Yetkililerden izin beklerim"], c: 3 }
      ],
      heyelan: [
        { q: "Bölgen eğimli ve yağmur yağıyor, ne yaparsın?", o: ["Pencereye çıkarım", "Tehlikeli bölgede kalmam", "Beklerim"], c: 2 },
        { q: "Toprak kayması başladı! Ne yaparsın?", o: ["Yüksek yere kaçarım", "Toprak yönüne koşarım", "Olduğum yerde kalırım"], c: 1 },
        { q: "Evde çatırdama sesleri geliyor, ne yaparsın?", o: ["Yetkililere haber veririm", "Beklerim", "Uyurum"], c: 1 },
        { q: "Heyelan bitti, ne yaparsın?", o: ["Alanı terk etmem", "Yetkililerin izin vermesini beklerim", "Fotoğraf çekerim"], c: 2 },
        { q: "Güvende misin, ne yaparsın?", o: ["Acil durum hattını ararım", "Evin içine girerim", "Hiçbir şey yapmam"], c: 1 }
      ],
      firtina: [
        { q: "Şiddetli fırtına uyarısı verildi, ne yaparsın?", o: ["Dışarı çıkarım", "Evde kalırım ve pencereleri kapatırım", "Arabayı dışarıda bırakırım"], c: 2 },
        { q: "Fırtına sırasında dışarıdasın, ne yaparsın?", o: ["Yere eğilirim ve korunaklı bir yer bulurum", "Yola devam ederim", "Ağacın altına sığınırım"], c: 1 },
        { q: "Pencereler sallanıyor, ne yaparsın?", o: ["Pencereden uzaklaşırım", "Yaklaşırım", "Kapatırım"], c: 1 },
        { q: "Elektrik gitti, ne yaparsın?", o: ["Mum yakarım", "Fener kullanırım", "Camı açarım"], c: 2 },
        { q: "Fırtına sonrası ne yaparsın?", o: ["Ağaçları kontrol ederim", "Yetkililerin duyurusunu dinlerim", "Dışarı çıkarım"], c: 2 }
      ]
    };

    function showScene() {
      const data = scenes;
      const title = document.getElementById("title");
      const choices = document.getElementById("choices");

      if (step >= data.length) {
        showResult();
        return;
      }

      const scene = data[step];
      title.innerText = scene.q;
      choices.innerHTML = "";

      scene.o.forEach((opt, i) => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.onclick = function() {
          handleAnswer(btn, i + 1, scene.c);
        };
        choices.appendChild(btn);
      });
    }

    function handleAnswer(btn, choice, correct) {
      if (choice === correct) {
        score++;
        btn.classList.add("flash-green");
      } else {
        mistakes.push(step + 1);
        btn.classList.add("flash-red");
      }
      step++;
      setTimeout(showScene, 700);
    }

    function showResult() {
      const pct = Math.round((score / maxScore) * 100);
      const title = document.getElementById("title");
      const choices = document.getElementById("choices");
      let mistakeText = mistakes.length
        ? "Yanlış cevap verdiğin sahneler: " + mistakes.join(", ")
        : "Tüm sahneleri doğru bildin!";

      title.innerText = "Oyun Bitti!";
      choices.innerHTML = `
        <p>Bilinç puanın: <b>${pct}%</b></p>
        <p>${mistakeText}</p>
        <button onclick="window.location.href='index.html'">Ana Menüye Dön</button>
      `;
    }

    function initGame() {
      scenes = allScenes[type];
      maxScore = scenes.length;
      showScene();
    }

    initGame();
  </script>
</body>
</html>

