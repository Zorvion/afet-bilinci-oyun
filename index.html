<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Afet Bilinci Oyunu</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #eef3f7;
            margin-top: 50px; /* Ãœst boÅŸluÄŸu biraz azalttÄ±m */
        }
        h1 { color: #222; }
        button {
            margin: 10px;
            padding: 10px 25px;
            font-size: 16px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            transition: 0.2s;
        }
        button:hover { background-color: #0056b3; }
        ul { text-align: left; max-width: 500px; margin: 20px auto; padding-left: 20px; } /* Liste ayarlarÄ± */
        li { margin-bottom: 8px; }
        .correct-answer { color: green; font-weight: bold; } /* DoÄŸru cevaplarÄ± vurgulamak iÃ§in */
    </style>
</head>
<body>

    <h1 id="title">Afet Bilinci Oyunu</h1>
    <div id="choices">
        <button id="depremBtn">ðŸŒ‹ Deprem Senaryosu</button>
        <button id="yanginBtn">ðŸ”¥ YangÄ±n Senaryosu</button>
    </div>

    <script>
        let score = 0;
        let step = 0;
        let type = "";
        let mistakes = [];
        let maxScorePerGame = 0; // Maksimum puanÄ± tutacak deÄŸiÅŸken

        const depremBtn = document.getElementById("depremBtn");
        const yanginBtn = document.getElementById("yanginBtn");

        // Senaryo Verileri: c: DoÄŸru cevap seÃ§eneÄŸinin endeksi (1, 2 veya 3)
        const scenes = {
            deprem: [
                { q: "Deprem baÅŸladÄ±! Ne yaparsÄ±n?", o: ["KaÃ§", "Ã‡Ã¶k, Kapan, Tutun", "Camdan bak"], c: 2 }, // DoÄŸru: Ã‡Ã¶k, Kapan, Tutun (2. ÅŸÄ±k)
                { q: "Dolap devriliyor, ne yaparsÄ±n?", o: ["DolabÄ± tut", "KafanÄ± koru (Korunma alanÄ±na geÃ§)", "Pencereye koÅŸ"], c: 2 }, // DoÄŸru: KafanÄ± koru (2. ÅŸÄ±k)
                { q: "SarsÄ±ntÄ± azalÄ±yor, ne yaparsÄ±n?", o: ["Evin iÃ§inde kal", "DÄ±ÅŸarÄ± Ã§Ä±k", "Elektrikleri kontrol et"], c: 2 }, // DoÄŸru: DÄ±ÅŸarÄ± Ã§Ä±k (GÃ¼venli alana) (2. ÅŸÄ±k)
                { q: "DÄ±ÅŸarÄ±dasÄ±n, Ã§evre kalabalÄ±k. Ne yaparsÄ±n?", o: ["Arabaya bin", "AÃ§Ä±k alanda dur", "Binalara yaklaÅŸ"], c: 2 }, // DoÄŸru: AÃ§Ä±k alanda dur (2. ÅŸÄ±k)
                { q: "ArtÃ§Ä± sarsÄ±ntÄ±lar baÅŸladÄ±, ne yaparsÄ±n?", o: ["KoÅŸ", "Yine Ã‡Ã¶k-Kapan-Tutun", "Duvarda bekle"], c: 2 }, // DoÄŸru: Yine Ã‡Ã¶k-Kapan-Tutun (2. ÅŸÄ±k)
                { q: "Deprem bitti, dÄ±ÅŸarÄ±dasÄ±n. Ne yaparsÄ±n?", o: ["Eve hemen dÃ¶n", "YaralÄ±lara yardÄ±m et (Gerekliyse)", "Elektrikleri aÃ§"], c: 2 } // DoÄŸru: YaralÄ±lara yardÄ±m et (2. ÅŸÄ±k)
            ],
            yangin: [
                { q: "Evde yangÄ±n Ã§Ä±ktÄ±! Ne yaparsÄ±n?", o: ["Su dÃ¶k (BÃ¼yÃ¼kse)", "90 saniyede Ã§Ä±kÄ±ÅŸ yolunu belirle ve kaÃ§", "Pencereye bak"], c: 2 }, // DoÄŸru: KaÃ§ (2. ÅŸÄ±k)
                { q: "Duman yayÄ±lÄ±yor, ne yaparsÄ±n?", o: ["KoÅŸ", "EÄŸilerek ilerle", "CamÄ± aÃ§"], c: 2 }, // DoÄŸru: EÄŸilerek ilerle (2. ÅŸÄ±k)
                { q: "KapÄ±ya ulaÅŸtÄ±n, ne yaparsÄ±n?", o: ["KapÄ±yÄ± aÃ§", "KapÄ±nÄ±n sÄ±caklÄ±ÄŸÄ±nÄ± kontrol et", "Geri dÃ¶n"], c: 2 }, // DoÄŸru: KapÄ±nÄ±n sÄ±caklÄ±ÄŸÄ±nÄ± kontrol et (2. ÅŸÄ±k)
                { q: "DÄ±ÅŸarÄ± Ã§Ä±ktÄ±n! Ne yaparsÄ±n?", o: ["KomÅŸuya koÅŸ", "112â€™yi/110'u ara ve toplanma alanÄ±na git", "Eve geri dÃ¶n"], c: 2 }, // DoÄŸru: 112â€™yi/110'u ara (2. ÅŸÄ±k)
                { q: "YangÄ±n sÃ¶ndÃ¼. Ne yaparsÄ±n?", o: ["Eve gir", "Yetkililerin iznini bekle", "Camdan bak"], c: 2 } // DoÄŸru: Yetkililerin iznini bekle (2. ÅŸÄ±k)
            ]
        };

        depremBtn.addEventListener("click", () => start("deprem"));
        yanginBtn.addEventListener("click", () => start("yangin"));

        function start(t) {
            type = t;
            score = 0;
            step = 1;
            mistakes = [];
            maxScorePerGame = scenes[type].length; // Maksimum doÄŸru sayÄ±sÄ±
            showScene();
        }

        function showScene() {
            const title = document.getElementById("title");
            const choices = document.getElementById("choices");
            const data = scenes[type];

            if (step > data.length) {
                showResult();
                return;
            }

            const scene = data[step - 1];
            title.innerText = Soru ${step}/${data.length}: ${scene.q}; // Soru numarasÄ±nÄ± ekledim
            choices.innerHTML = "";

            scene.o.forEach((opt, i) => {
                const btn = document.createElement("button");
                btn.textContent = opt;
                // Cevap endeksi (i + 1) ve doÄŸru cevap (scene.c) gÃ¶nderiliyor
                btn.onclick = () => handleAnswer(i + 1, scene.c, scene.q, opt, scene.o[scene.c - 1]);
                choices.appendChild(btn);
            });
        }

        function handleAnswer(choice, correct, question, selectedOption, correctAnswerText) {
            if (choice === correct) {
                score++; // Her doÄŸru cevap 1 puan
            } else {
                // HatalÄ± cevapta soruyu, seÃ§ilen yanlÄ±ÅŸ ÅŸÄ±kkÄ± ve doÄŸru ÅŸÄ±kkÄ± kaydet
                mistakes.push({
                    question: question,
                    selected: selectedOption,
                    correct: correctAnswerText
                });
            }

            step++;
            if (step > scenes[type].length) {
                showResult();
            } else {
                showScene();
            }
        }

        function showResult() {
            // PuanÄ± 100 Ã¼zerinden yÃ¼zdelik olarak hesapla (DoÄŸru SayÄ±sÄ± / Toplam Soru SayÄ±sÄ±) * 100
            const percentageScore = maxScorePerGame > 0 ? Math.round((score / maxScorePerGame) * 100) : 0;

            const hatalar = mistakes.length
                ? mistakes.map(m => `
                    <li>
                        <b>Soru:</b> ${m.question}<br>
                        <b>Senin CevabÄ±n:</b> <span style="color: red;">${m.selected}</span><br>
                        <b>DoÄŸru Cevap:</b> <span class="correct-answer">${m.correct}</span>
                    </li>
                  `).join("")
                : "<li>HiÃ§ hata yapmadÄ±n, afet bilincin mÃ¼kemmel!</li>";

            document.getElementById("title").innerText = ${type.charAt(0).toUpperCase() + type.slice(1)} Senaryosu Bitti!;
            document.getElementById("choices").innerHTML = `
                <p style="font-size:24px; margin-bottom: 25px;">
                    Afet Bilinci BaÅŸarÄ± PuanÄ±n: 
                    <b style="color: ${percentageScore >= 80 ? 'green' : (percentageScore >= 50 ? 'orange' : 'red')};">
                        %${percentageScore}
                    </b>
                    <br>(${score} DoÄŸru / ${maxScorePerGame} Soru)
                </p>
                
                <h3>GÃ¶zden GeÃ§irmen Gerekenler (${mistakes.length} YanlÄ±ÅŸ DavranÄ±ÅŸ):</h3>
                <ul>${hatalar}</ul>
                <button id="menuBtn">Ana MenÃ¼ye DÃ¶n</button>
            `;

            document.getElementById("menuBtn").addEventListener("click", () => location.reload());
        }
    </script>

</body>
</html>
