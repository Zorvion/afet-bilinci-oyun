<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Afet Bilinci Oyunu</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #eef3f7;
      margin-top: 70px;
    }
    h1 { color: #222; }
    button {
      margin: 10px;
      padding: 10px 25px;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background-color: #007bff;
      color: white;
      transition: 0.2s;
    }
    button:hover { background-color: #0056b3; }
    ul { text-align: left; max-width: 400px; margin: 10px auto; }
  </style>
</head>
<body>

  <h1 id="title">Afet Bilinci Oyunu</h1>
  <div id="choices">
    <button onclick="start('deprem')">ğŸŒ‹ Deprem</button>
    <button onclick="start('yangin')">ğŸ”¥ YangÄ±n</button>
  </div>

  <script>
    let score = 0;
    let step = 0;
    let type = "";
    let mistakes = [];

    function start(t) {
      type = t;
      score = 0;
      step = 1;
      mistakes = [];
      if (type === "deprem") deprem(step);
      else yangin(step);
    }

    // ==================== DEPREM ====================
    function deprem(choice) {
      const title = document.getElementById("title");
      const choices = document.getElementById("choices");

      // Ã¶nceki sahnede yanlÄ±ÅŸ yaptÄ±ysa not al
      if (step > 1) checkAnswer(choice);

      if (step === 1) {
        title.innerText = "Deprem baÅŸladÄ±! Ne yaparsÄ±n?";
        choices.innerHTML = `
          <button onclick="next(2,2)">KaÃ§</button>
          <button onclick="next(2,1)">Ã‡Ã¶k, Kapan, Tutun</button>
          <button onclick="next(2,3)">Camdan bak</button>
        `;
      } 
      else if (step === 2) {
        title.innerText = "Dolap devriliyor, ne yaparsÄ±n?";
        choices.innerHTML = `
          <button onclick="next(3,1)">DolabÄ± tut</button>
          <button onclick="next(3,2)">KafanÄ± koru</button>
          <button onclick="next(3,3)">Pencereye koÅŸ</button>
        `;
      } 
      else if (step === 3) {
        title.innerText = "SarsÄ±ntÄ± azalÄ±yor, ne yaparsÄ±n?";
        choices.innerHTML = `
          <button onclick="next(4,3)">Elektrikleri kontrol et</button>
          <button onclick="next(4,2)">DÄ±ÅŸarÄ± Ã§Ä±k</button>
          <button onclick="next(4,1)">Evin iÃ§inde kal</button>
        `;
      } 
      else if (step === 4) {
        title.innerText = "DÄ±ÅŸarÄ±dasÄ±n, Ã§evre kalabalÄ±k. Ne yaparsÄ±n?";
        choices.innerHTML = `
          <button onclick="next(5,2)">AÃ§Ä±k alanda dur</button>
          <button onclick="next(5,1)">Arabaya bin</button>
          <button onclick="next(5,3)">Binalara yaklaÅŸ</button>
        `;
      }
      else if (step === 5) {
        title.innerText = "ArtÃ§Ä± sarsÄ±ntÄ±lar baÅŸladÄ±, ne yaparsÄ±n?";
        choices.innerHTML = `
          <button onclick="next(6,2)">Yine Ã‡Ã¶k-Kapan-Tutun</button>
          <button onclick="next(6,1)">KoÅŸ</button>
          <button onclick="next(6,3)">Duvarda bekle</button>
        `;
      }
      else if (step === 6) {
        title.innerText = "Deprem bitti! Ne yaparsÄ±n?";
        choices.innerHTML = `
          <button onclick="next(7,1)">Eve dÃ¶n</button>
          <button onclick="next(7,2)">YaralÄ±lara yardÄ±m et</button>
          <button onclick="next(7,3)">Elektrikleri aÃ§</button>
        `;
      }
      else if (step === 7) {
        showResult();
      }
    }

    // ==================== YANGIN ====================
    function yangin(choice) {
      const title = document.getElementById("title");
      const choices = document.getElementById("choices");

      if (step > 1) checkAnswer(choice);

      if (step === 1) {
        title.innerText = "Evde yangÄ±n Ã§Ä±ktÄ±! Ne yaparsÄ±n?";
        choices.innerHTML = `
          <button onclick="next(2,1)">Su dÃ¶k</button>
          <button onclick="next(2,2)">KaÃ§</button>
          <button onclick="next(2,3)">Pencereye bak</button>
        `;
      } 
      else if (step === 2) {
        title.innerText = "Duman yayÄ±lÄ±yor, ne yaparsÄ±n?";
        choices.innerHTML = `
          <button onclick="next(3,1)">KoÅŸ</button>
          <button onclick="next(3,2)">EÄŸilerek ilerle</button>
          <button onclick="next(3,3)">CamÄ± aÃ§</button>
        `;
      } 
      else if (step === 3) {
        title.innerText = "KapÄ±ya ulaÅŸtÄ±n, ne yaparsÄ±n?";
        choices.innerHTML = `
          <button onclick="next(4,1)">KapÄ±yÄ± aÃ§</button>
          <button onclick="next(4,2)">KapÄ±nÄ±n sÄ±caklÄ±ÄŸÄ±nÄ± kontrol et</button>
          <button onclick="next(4,3)">Geri dÃ¶n</button>
        `;
      }
      else if (step === 4) {
        title.innerText = "DÄ±ÅŸarÄ± Ã§Ä±ktÄ±n! Ne yaparsÄ±n?";
        choices.innerHTML = `
          <button onclick="next(5,1)">KomÅŸuya koÅŸ</button>
          <button onclick="next(5,2)">112â€™yi ara</button>
          <button onclick="next(5,3)">Eve geri dÃ¶n</button>
        `;
      }
      else if (step === 5) {
        title.innerText = "YangÄ±n sÃ¶ndÃ¼. Ne yaparsÄ±n?";
        choices.innerHTML = `
          <button onclick="next(6,1)">Eve gir</button>
          <button onclick="next(6,2)">Yetkililerin izni bekle</button>
          <button onclick="next(6,3)">Camdan bak</button>
        `;
      }
      else if (step === 6) {
        showResult();
      }
    }

    // ==================== ORTAK ====================
    function next(nextStep, correct) {
      let func = type === "deprem" ? deprem : yangin;
      checkAnswer(correct);
      step = nextStep;
      func();
    }

    function checkAnswer(choice) {
      const correctAnswers = {
        deprem: {1:2,2:2,3:2,4:2,5:2,6:2},
        yangin: {1:2,2:2,3:2,4:2,5:2}
      };
      const right = correctAnswers[type][step];
      if (choice === right) score += 15;
      else mistakes.push(document.getElementById("title").innerText);
    }

    function showResult() {
      const bilincli = Math.min(100, score);
      const hatalar = mistakes.length > 0
        ? mistakes.map(x => <li>${x}</li>).join("")
        : "<li>HiÃ§ hata yapmadÄ±n, mÃ¼kemmelsin!</li>";

      document.getElementById("title").innerText = "Oyun Bitti!";
      document.getElementById("choices").innerHTML = `
        <p style="font-size:20px;">BilinÃ§ PuanÄ±n: <b>${bilincli}%</b></p>
        <h3>YanlÄ±ÅŸ DavranÄ±ÅŸlarÄ±n:</h3>
        <ul>${hatalar}</ul>
        <button onclick="window.location.reload()">Ana MenÃ¼ye DÃ¶n</button>
      `;
    }
  </script>

</body>
</html>
