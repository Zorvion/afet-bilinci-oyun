<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Afet Bilinci Oyunu</title>
<style>
  body{font-family:Arial,Helvetica,sans-serif;text-align:center;
    background:linear-gradient(135deg,#e8f5e9,#e3f2fd);margin:0;padding:20px;min-height:100vh}
  #card{max-width:760px;margin:30px auto;background:#fff;padding:22px;border-radius:14px;
    box-shadow:0 10px 30px rgba(10,30,60,0.08)}
  h1{color:#0d47a1;margin:6px 0 8px}
  h2{color:#0d47a1;margin:12px 0}
  p.small{color:#555;font-size:14px;margin:6px 0}
  #choices button,#choicesArea button,#result button{margin:10px;padding:10px 22px;font-size:15px;border-radius:10px;border:none;
    background:#1976d2;color:#fff;cursor:pointer;transition:all .15s}
  #choices button:hover,#choicesArea button:hover,#result button:hover{background:#0d47a1;transform:translateY(-2px)}
  #choices button:active,#choicesArea button:active,#result button:active{transform:translateY(0)}
  #progressWrap{height:12px;background:#e6eefc;border-radius:10px;overflow:hidden;margin:12px 0}
  #progress{height:100%;width:0;background:linear-gradient(90deg,#4caf50,#1976d2);transition:width 0.3s}
  ul{max-width:720px;margin:12px auto;text-align:left;padding-left:18px}
  li{margin-bottom:10px}
  .muted{color:#666;font-size:13px}
  .explain{color:#2e7d32;font-weight:600}
  .wrong{color:#c62828;font-weight:600}
  .menuNote{font-size:14px;color:#37474f;margin-top:8px}
  @media(max-width:520px){#card{padding:16px}#choices button,#choicesArea button,#result button{padding:10px 12px;margin:8px}}
</style>
</head>
<body>
  <div id="card">
    <h1 id="title">Afet Bilinci Platformu</h1>
    <p class="small" id="subtitle">Bir senaryo seÃ§ â€” ilerledikÃ§e yanlÄ±ÅŸ yaptÄ±ÄŸÄ±n sahneleri toplayacak, en sonda neden yanlÄ±ÅŸ olduÄŸunu gÃ¶receksin. </p>

    <div id="menu">
      <div id="choices"></div>
      <p class="menuNote">hata yaptÄ±ÄŸÄ±nda neden yanlÄ±ÅŸ olduÄŸu son ekranda aÃ§Ä±klanacak.</p>
    </div>

    <div id="game" style="display:none">
      <div id="progressWrap"><div id="progress"></div></div>
      <h2 id="q" style="min-height:48px;margin:8px 0"></h2>
      <div id="choicesArea"></div>
      <p class="muted" id="hint" style="height:20px;margin-top:8px"></p>
    </div>

    <div id="result" style="display:none">
      <h2 id="resultTitle"></h2>
      <div id="resultBody"></div>
      <div id="resultButtons" style="margin-top:12px"></div>
      <p class="muted" style="margin-top:10px">Not: Bu oyunda puan gÃ¶sterilmiyor; amaÃ§ doÄŸru davranÄ±ÅŸlarÄ± Ã¶ÄŸrenmek.</p>
    </div>
  </div>

<script>
let locked=false;
let type="", index=0;
let mistakes=[];
const progressEl = ()=>document.getElementById('progress');

function playTone(freq,dur,vol=0.05){
  try{
    const ctx = new (window.AudioContext||window.webkitAudioContext)();
    const o = ctx.createOscillator();
    const g = ctx.createGain();
    o.type='sine'; o.frequency.value = freq;
    g.gain.value = vol;
    o.connect(g); g.connect(ctx.destination);
    o.start();
    setTimeout(()=>{ o.stop(); ctx.close(); }, dur);
  }catch(e){}
}

function correctSound(){ playTone(880,120,0.03); }
function wrongSound(){ playTone(220,220,0.04); }

const scenes = {
  deprem: [
    { q:"Deprem baÅŸladÄ±! Ä°lk tepkin ne olmalÄ±?", o:["Panikle dÄ±ÅŸarÄ± koÅŸmak","Ã‡Ã¶kâ€“Kapanâ€“Tutun (gÃ¼venli pozisyon)","Camdan izlemek"], c:2,
      e:["Binalar ve camlar tehlikelidir. DÄ±ÅŸarÄ± koÅŸmak daha tehlikeli olabilir.","DoÄŸru: vÃ¼cut korunur, yaralanma riski azalÄ±r.","Cam kÄ±rÄ±labilir, tehlikeli."] },
    { q:"GÃ¼vende olmak iÃ§in en gÃ¼venli yer neresidir?", o:["KapÄ± eÅŸiÄŸi","DayanÄ±klÄ± masa/Ã§alÄ±ÅŸma masasÄ± altÄ±","Pencere kenarÄ±"], c:2,
      e:["KapÄ± eÅŸiÄŸi eskiden Ã¶nerilirdi ama gÃ¼ncel tavsiye masa altÄ±.","DoÄŸru: aÄŸÄ±r nesnelerden korur.","Pencere kenarÄ± cam tehlikesi nedeniyle yanlÄ±ÅŸ."] },
    { q:"Dolap devrilmek Ã¼zereyken ne yapmalÄ±sÄ±n?", o:["DolabÄ± tutmayÄ± denemek","BaÅŸÄ±nÄ± korumak (kask/ellerle)","Dolaptan uzaklaÅŸÄ±p pencereye koÅŸmak"], c:2,
      e:["DolabÄ± tutmaya Ã§alÄ±ÅŸmak yaralanmaya neden olabilir.","DoÄŸru: baÅŸ ve boyun korunmalÄ±.","Pencereye koÅŸmak tehlikeli."] },
    { q:"Deprem bittiÄŸinde ilk yapÄ±lacaklardan biri?", o:["Toplanma alanÄ±na gitmek","Eve geri dÃ¶nmek","Elektrikleri aÃ§mak"], c:1,
      e:["DoÄŸru: planlÄ± toplanma gÃ¼venlidir.","Eve dÃ¶nmek hasarlÄ±ysa tehlikeli.","Elektrikleri aÃ§madan yetkililerin talimatÄ± beklenir."] },
    { q:"ArtÃ§Ä± sallantÄ± hissedersen ne yapmalÄ±sÄ±n?", o:["Panikleyip koÅŸmak","Tekrar Ã§Ã¶kâ€“kapanâ€“tutun","Binaya yaklaÅŸmak"], c:2,
      e:["KaÃ§Ä±ÅŸ sÄ±rasÄ±nda dÃ¼ÅŸme riski var.","DoÄŸru davranÄ±ÅŸ tekrardÄ±r.","Binalara yaklaÅŸmak tehlikelidir (artÃ§Ä± Ã§Ã¶kme)."] },
    { q:"AsansÃ¶rle mi yoksa merdivenle mi Ã§Ä±kmalÄ±sÄ±n?", o:["AsansÃ¶r","Merdiven","HiÃ§biri, binada kal"], c:2,
      e:["AsansÃ¶rde mahsur kalma riski var.","Merdiven gÃ¼venlidir (hÄ±zlÄ± ve kontrollÃ¼ Ã§Ä±kÄ±ÅŸ).","Binada kalmak bazen gerekebilir ama genelde toplanma alanÄ±na Ã§Ä±kÄ±ÅŸ Ã¶nerilir."] },
    { q:"Toplanma alanÄ±nda ne yapmalÄ±sÄ±n?", o:["Acil durum talimatlarÄ±nÄ± dinlemek","Kendi kendine ayrÄ±ntÄ±lÄ± arama yapmak","Sadece telefonla sosyal medyada paylaÅŸmak"], c:1,
      e:["DoÄŸru: yetkililerin talimatlarÄ± Ã¶nemlidir.","AynÄ± zamanda gÃ¼venlik riski oluÅŸturabilir.","YardÄ±m Ã§aÄŸÄ±rmak iyidir ama yetkilileri takip et."] },
    { q:"Deprem sonrasÄ± yapman gereken doÄŸru davranÄ±ÅŸ nedir?", o:["HasarÄ± kontrol eder eve girerim","Yetkililere durumu bildiririm ve yardÄ±m ederim","HiÃ§bir ÅŸey yapmam"], c:2,
      e:["Eve girmek tehlikeli olabilir; yetkili izin gerekli.","DoÄŸru: bilgi ve yardÄ±m Ã¶nemlidir.","HiÃ§bir ÅŸey yapmamak yanlÄ±ÅŸ."] }
  ],
  yangin: [
    { q:"YangÄ±n anÄ±nda ilk olarak ne yapÄ±lmalÄ±?", o:["YangÄ±nÄ± sÃ¶ndÃ¼rmeye Ã§alÄ±ÅŸmak (bÃ¼yÃ¼kse riskli)","Derhal kaÃ§Ä±ÅŸ yolunu kullanmak","Pencereye Ã§Ä±kÄ±p izlemek"], c:2,
      e:["KÃ¼Ã§Ã¼k ve kontrol edilebiliyorsa sÃ¶ndÃ¼rÃ¼lÃ¼r ama riskliyse Ã¶ncelik kaÃ§Ä±ÅŸtÄ±r.","DoÄŸru: can gÃ¼venliÄŸi Ã¶ncelikli.","Ä°zlemek tehlikeli ve yanlÄ±ÅŸ."] },
    { q:"KapÄ±dan Ã¶nce kontrol etmen gereken nedir?", o:["KapÄ±nÄ±n hemen aÃ§Ä±lmasÄ±","KapÄ±nÄ±n sÄ±caklÄ±ÄŸÄ± (el/Ã¶nkol ile)","Pencereyi aÃ§mak"], c:2,
      e:["AÃ§mak alev veya dumanla karÅŸÄ±laÅŸmana neden olur.","DoÄŸru: sÄ±caklÄ±k kontrolÃ¼ gÃ¼venlik saÄŸlar.","Pencereyi aÃ§mak dumanÄ± Ã§ekebilir, genelde Ã¶nerilmez."] },
    { q:"Duman yoÄŸun ise nasÄ±l ilerlemelisin?", o:["Ayakta yÃ¼rÃ¼mek","EÄŸilerek/zemine yakÄ±n yÃ¼rÃ¼mek","KoÅŸmak"], c:2,
      e:["Ayakta duman solunmasÄ±nÄ± artÄ±rÄ±r.","DoÄŸru: temiz hava dÃ¼ÅŸÃ¼k seviyededir.","KoÅŸmak dÃ¼ÅŸme ve boÄŸulma riskini artÄ±rÄ±r."] },
    { q:"AteÅŸ hÄ±zla yayÄ±lÄ±yorsa ne yapmalÄ±sÄ±n?", o:["Panikle pencereden atlamak","Panik yapmadan Ã§Ä±kÄ±ÅŸa yÃ¶nelmek","Dolaba saklanmak"], c:2,
      e:["Atlamak aÄŸÄ±r yaralanma riski taÅŸÄ±r.","DoÄŸru: kontrollÃ¼ kaÃ§Ä±ÅŸ en gÃ¼venli.","Dolap saklanmak Ã¶lÃ¼mcÃ¼l olabilir."] },
    { q:"KapÄ±nÄ±n arkasÄ±nda duman varsa, ne yapmalÄ±sÄ±n?", o:["Zorla aÃ§mak","Islak bezle kapÄ±yÄ± kapatÄ±p alternatif yol aramak","Orada beklemek"], c:2,
      e:["Zorla aÃ§mak alevi hÄ±zla iÃ§eri alÄ±r.","DoÄŸru: Ä±slak Ã¶rtÃ¼ duman giriÅŸini azaltÄ±r ve alternatif arama gerekir.","Beklemek tehlikelidir."] },
    { q:"DÄ±ÅŸarÄ±dayken ne yapmalÄ±sÄ±n?", o:["YangÄ±nÄ± Ã§ekim amaÃ§lÄ± izlemek","112/110'u arayÄ±p bilgi vermek","Eve geri dÃ¶nÃ¼p eÅŸya almak"], c:2,
      e:["PaylaÅŸmak tehlikeli ve yardÄ±m geciktirir.","DoÄŸru: acil servisi bilgilendir.","EÅŸyalarÄ± almak hayat riski oluÅŸturur."] },
    { q:"YanÄ±k yaralÄ±sÄ± gÃ¶rdÃ¼n, ilk yardÄ±m ne olmalÄ±?", o:["YanÄ±ÄŸÄ± soÄŸuk suyla yÄ±kamak ve yardÄ±m Ã§aÄŸÄ±rmak","YanÄ±ÄŸa krem sÃ¼rÃ¼p beklemek","Hemen Ã¼zerini aÃ§Ä±p ovmak"], c:1,
      e:["DoÄŸru: soÄŸuk su yanÄ±k tedavisinin ilk adÄ±mÄ±dÄ±r.","Kremler profesyonel kontrol sonrasÄ±.","Ovmak enfeksiyon riskini artÄ±rÄ±r."] },
    { q:"YangÄ±n sÃ¶ndÃ¼ÄŸÃ¼nde yapÄ±lacak ilk ÅŸey nedir?", o:["Yetkililerin talimatÄ±na uymak","Hemen eve geri dÃ¶nmek","Olay yerinin fotoÄŸrafÄ±nÄ± Ã§ekip paylaÅŸmak"], c:1,
      e:["DoÄŸru: yetkililerin yÃ¶nlendirmesi hayati.","Eve dÃ¶nmek tehlikeli olabilir.","PaylaÅŸmak yanlÄ±ÅŸ bilgiler yayabilir."] }
  ],
  sel: [
    { q:"Ani yaÄŸÄ±ÅŸta su yÃ¼kseliyorsa ilk tepkin ne olur?", o:["ArabadayÄ±m, beklerim","YÃ¼ksek yere/katlara Ã§Ä±karÄ±m","Suyu fotoÄŸraflarÄ±m"], c:2,
      e:["Arabada su yÃ¼kselince sÄ±kÄ±ÅŸma riski yÃ¼ksek.","DoÄŸru: yÃ¼kseÄŸe ve gÃ¼venli bÃ¶lgeye Ã§Ä±k.","FotoÄŸraf Ã§ekmek yardÄ±m etmez."] },
    { q:"Dere kenarÄ±nda su yÃ¼kseliyorsa ne yapmalÄ±sÄ±n?", o:["Dereye yaklaÅŸÄ±rÄ±m","Hemen uzaklaÅŸÄ±rÄ±m","Suya girip kurtarmaya Ã§alÄ±ÅŸÄ±rÄ±m"], c:2,
      e:["YaklaÅŸmak sÃ¼rÃ¼klenme riskini artÄ±rÄ±r.","DoÄŸru: uzaklaÅŸ ve yetkilileri uyar.","Suya girmek profesyonel ekip iÅŸi."] },
    { q:"Sel alarmÄ± verildiyse evde mi kalmalÄ±sÄ±n?", o:["Evde kalÄ±rÄ±m ve yÃ¼ksek kata Ã§Ä±karÄ±m","Pencereden izlerim","Evi terk edip aÃ§Ä±k alana Ã§Ä±karÄ±m"], c:1,
      e:["EÄŸer iÃ§erideysen yÃ¼ksek kata Ã§Ä±kmak daha gÃ¼venli olabilir.","Ä°zlemek risk oluÅŸturur.","AÃ§Ä±k alana geÃ§me kriterlere gÃ¶re deÄŸiÅŸir."] },
    { q:"AraÃ§ iÃ§inde su yÃ¼kseliyorsa ne yapÄ±lmalÄ±?", o:["Motora gÃ¼venip beklerim","AracÄ± terk edip yÃ¼kseÄŸe Ã§Ä±karÄ±m","Arabada kalÄ±rÄ±m Ã§Ã¼nkÃ¼ gÃ¼venli"], c:2,
      e:["Motor gÃ¼vende deÄŸil; su yÃ¼kseldikÃ§e tehlike artar.","DoÄŸru: araÃ§ terk edilip gÃ¼venli yere.","Arabada kalmak boÄŸulma riski taÅŸÄ±r."] },
    { q:"Sel sonrasÄ± temiz suya nasÄ±l eriÅŸmelisin?", o:["Kirli suyu iÃ§ebilirim","Yetkililerin saÄŸladÄ±ÄŸÄ± daÄŸÄ±tÄ±mÄ± beklerim","Her Ã§eÅŸme gÃ¼venlidir"], c:2,
      e:["Kirli su saÄŸlÄ±k riski taÅŸÄ±r.","DoÄŸru: yetkililerin yÃ¶nlendirmesi ve daÄŸÄ±tÄ±mÄ± bekle.","Her Ã§eÅŸme kontaminasyona aÃ§Ä±k olabilir."] },
    { q:"Sel bÃ¶lgesinde elektrik riski varsa ne yapmalÄ±sÄ±n?", o:["ElektriÄŸi aÃ§arÄ±m","Elektrik kaynaklarÄ±ndan uzak dururum","Suya metal eÅŸyalar atarÄ±m"], c:2,
      e:["ElektriÄŸi aÃ§mak tehlikeli olabilir.","DoÄŸru: elektrik kaynaklarÄ±ndan uzak dur.","Metal atmak tehlikeli."] },
    { q:"Sel bÃ¶lgesinde yardÄ±m gerekiyorsa ne yaparsÄ±n?", o:["Kendi baÅŸÄ±ma tehlikeli arama yaparÄ±m","Yetkilileri bilgilendiririm ve gÃ¼venli davranÄ±rÄ±m","Televizyona baÄŸlanÄ±rÄ±m"], c:2,
      e:["Kendi arama tehlikeli olabilir.","DoÄŸru: yetkilileri bilgilendir ve gÃ¼venli kal.","Medya Ã¶ncelikli deÄŸil."] },
    { q:"Sel sonrasÄ± hangi eÅŸyalarÄ± ilk kontrol etmelisin?", o:["GÄ±da ve su kaynaklarÄ±nÄ±","Sadece eÅŸyalarÄ±","Elektrikli cihazlarÄ± hemen kullanÄ±rÄ±m"], c:1,
      e:["DoÄŸru: gÄ±da-su Ã¶ncelikli, gÃ¼venlik kritik.","Sadece eÅŸyalar yanlÄ±ÅŸ Ã¶ncelik.","Elektrikli cihazlar kontrol edilmeden tehlikeli olabilir."] }
  ],
  heyelan: [
    { q:"Åiddetli yaÄŸmurda toprak hareketi hissedersen ne yaparsÄ±n?", o:["AÅŸaÄŸÄ±ya doÄŸru koÅŸarÄ±m","YukarÄ± ve iÃ§eri doÄŸru hareket ederim","Durup beklerim"], c:2,
      e:["AÅŸaÄŸÄ±ya koÅŸmak heyelana yaklaÅŸtÄ±rÄ±r.","DoÄŸru: yÃ¼ksek, saÄŸlam bÃ¶lgeye gitmek gerek.","Beklemek toplanma riskini artÄ±rÄ±r."] },
    { q:"Ev yakÄ±nÄ±nda Ã§atlaklar gÃ¶rÃ¼rsen ne yapmalÄ±sÄ±n?", o:["Durumu gÃ¶rmezden gelirim","Yetkililere bildiririm ve gÃ¼venli bÃ¶lgeye geÃ§erim","EÅŸyalarÄ± toplamaya baÅŸlarÄ±m"], c:2,
      e:["GÃ¶rmezden gelmek risklidir.","DoÄŸru: erken bildirim can kurtarÄ±r.","EÅŸyalarÄ± almak tehlikeli olabilir."] },
    { q:"YamaÃ§tan sesler geliyorsa ne yapmalÄ±sÄ±n?", o:["AÄŸÄ±r eÅŸya ile alanÄ± kontrol ederim","Hemen uzaklaÅŸÄ±rÄ±m","FotoÄŸraf Ã§ekip paylaÅŸÄ±rÄ±m"], c:2,
      e:["EÅŸya ile mÃ¼dahale tehlikeli.","DoÄŸru: hÄ±zlÄ± uzaklaÅŸma hayati.","FotoÄŸraf yardÄ±m etmez, zaman kaybettirir."] },
    { q:"Heyelan bÃ¶lgesinde araÃ§la hareket ediyorsan?", o:["HÄ±zlÄ± geÃ§erim","YavaÅŸÃ§a ve dikkatle uzaklaÅŸÄ±rÄ±m","AraÃ§la durur beklerim"], c:2,
      e:["HÄ±zlÄ± geÃ§iÅŸ kayma riskini artÄ±rÄ±r.","DoÄŸru: kontrollÃ¼ uzaklaÅŸma gerekir.","AraÃ§ta beklemek tehlikelidir."] },
    { q:"Ev heyelan riski altÄ±ndaysa ne yapmalÄ±sÄ±n?", o:["Acil durum planÄ± uygularÄ±m","EÅŸyalarÄ± toplamaya Ã§alÄ±ÅŸÄ±rÄ±m","HiÃ§bir ÅŸey yapmam"], c:1,
      e:["DoÄŸru: plan ve hÄ±zlÄ± hareket hayati.","EÅŸyalarÄ± almak zaman kaybettirir.","HiÃ§bir ÅŸey yapmak tehlikelidir."] },
    { q:"Toprak kaymasÄ± sonrasÄ± ne yapmalÄ±sÄ±n?", o:["HasarÄ± kendi baÅŸÄ±ma temizlerim","Yetkililerin iznini ve yardÄ±mÄ±nÄ± beklerim","Derhal eve girerim"], c:2,
      e:["Kendi baÅŸÄ±na temizleme tehlikeli olabilir.","DoÄŸru: yetkililer ve ekipler gerekli.","Eve girmek Ã§Ã¶kme riskini artÄ±rabilir."] },
    { q:"YaÄŸÄ±ÅŸ devam ediyorsa nerede kalmalÄ±sÄ±n?", o:["AlÃ§akta, vadide","YÃ¼ksekte ve saÄŸlam zeminde","Sel yataklarÄ±nda"], c:2,
      e:["AlÃ§ak yerler su toplar, tehlikelidir.","DoÄŸru: yÃ¼ksek ve saÄŸlam yer gÃ¼venlidir.","Sel yataklarÄ± tehlikeli."] },
    { q:"Heyelan anÄ±nda en gÃ¼venli hareket nedir?", o:["YÃ¼kseÄŸe ve yan tarafa doÄŸru hÄ±zlÄ±ca kaÃ§mak","Duvarda saklanmak","Yere yatmak"], c:1,
      e:["DoÄŸru: yamaÃ§tan uzaklaÅŸÄ±p yÃ¼ksek noktaya gitmek.","Duvarda saklanmak gÃ¶Ã§Ã¼k riski taÅŸÄ±r.","Yere yatmak etkilidir mi belirsiz ve risklidir."] }
  ],
  firtina: [
    { q:"FÄ±rtÄ±na anÄ±nda ilk korunma olarak ne yapmalÄ±sÄ±n?", o:["AÃ§Ä±k alanda kalÄ±rÄ±m","SaÄŸlam kapalÄ± bir binaya girerim","AÄŸaÃ§ altÄ±na saklanÄ±rÄ±m"], c:2,
      e:["AÃ§Ä±k alan risklidir (yÄ±ldÄ±rÄ±m, uÃ§an nesneler).","DoÄŸru: saÄŸlam kapalÄ± alan gÃ¼venlidir.","AÄŸaÃ§ altÄ± devrilme/yÄ±ldÄ±rÄ±m risklidir."] },
    { q:"Deniz kenarÄ±nda fÄ±rtÄ±na varsa ne yapmalÄ±sÄ±n?", o:["Denize aÃ§Ä±lÄ±rÄ±m","KÄ±yÄ±dan uzaklaÅŸÄ±p gÃ¼venli yÃ¼ksek yere Ã§Ä±karÄ±m","Deniz kÄ±yÄ±sÄ±nda beklerim"], c:2,
      e:["Denize Ã§Ä±kmak Ã¶lÃ¼mcÃ¼l risk taÅŸÄ±r.","DoÄŸru: kÄ±yÄ±dan uzaklaÅŸ ve yÃ¼ksel.","KÄ±yÄ±da kalmak tehlikelidir."] },
    { q:"RÃ¼zgÃ¢r Ã§ok kuvvetliyse araÃ§ kullanÄ±rken?", o:["HÄ±zlanÄ±rÄ±m ve geÃ§erim","YavaÅŸlar kenara Ã§ekilirim","AraÃ§ta sabit dururum"], c:2,
      e:["HÄ±zlanma kontrol kaybÄ± yaratÄ±r.","DoÄŸru: yavaÅŸlayÄ±p gÃ¼venli yerde bekle.","AraÃ§ta kalmak bazen gerekli ama kenara Ã§ekilmek daha gÃ¼venli."] },
    { q:"FÄ±rtÄ±na sÄ±rasÄ±nda cam uÃ§aÄŸÄ± vb nesneler iÃ§in ne yapmalÄ±sÄ±n?", o:["Pencereleri kapatÄ±r, perdeleri kapatÄ±rÄ±m","Pencereleri aÃ§Ä±k bÄ±rakÄ±rÄ±m","CamÄ±n Ã¶nÃ¼nde dururum"], c:1,
      e:["DoÄŸru: cam koruma ve iÃ§eride gÃ¼venlik saÄŸlar.","AÃ§Ä±k bÄ±rakmak tehlikeli.","Cam Ã¶nÃ¼nde durmak tehlikelidir."] },
    { q:"YÄ±ldÄ±rÄ±m Ã§arpmasÄ± riskinde ne yapmalÄ±sÄ±n?", o:["Metalik eÅŸyalarÄ± yere bÄ±rakÄ±rÄ±m ve iÃ§eri girerim","AÃ§Ä±kta kalÄ±p gÃ¶kyÃ¼zÃ¼nÃ¼ izlerim","YÃ¼ksek yere Ã§Ä±kÄ±p beklerim"], c:1,
      e:["DoÄŸru: metalden uzaklaÅŸ ve iÃ§eri gir.","AÃ§Ä±kta kalmak Ã¶lÃ¼mcÃ¼l risktir.","YÃ¼kseÄŸe Ã§Ä±kmak riski artÄ±rÄ±r."] },
    { q:"FÄ±rtÄ±na sonrasÄ± evde kontrol etmen gereken ilk ÅŸey?", o:["Elektrik hatlarÄ± ve gaz kaÃ§aklarÄ±nÄ± kontrol etmek","Hemen televizyonu aÃ§mak","EÅŸyalarÄ± karÄ±ÅŸtÄ±rmak"], c:1,
      e:["DoÄŸru: gÃ¼venlik riski Ã¶nceliklidir.","Televizyon veya eÄŸlence Ã¶ncelik olmamalÄ±.","Rastgele eÅŸyalarÄ± karÄ±ÅŸtÄ±rmak tehlike doÄŸurur."] },
    { q:"GÃ¼Ã§lÃ¼ rÃ¼zgÃ¢r sÄ±rasÄ±nda dÄ±ÅŸarÄ±dayken nereye sÄ±ÄŸÄ±nmalÄ±sÄ±n?", o:["AÃ§Ä±k garaja/garaj Ã¶nÃ¼","KÃ¼Ã§Ã¼k kafe tente altÄ±","SaÄŸlam iÃ§ mekÃ¢na"], c:3,
      e:["AÃ§Ä±k garage uÃ§uÅŸan cisimlere aÃ§Ä±ktÄ±r.","Tente altÄ± uÃ§uÅŸan parÃ§alara aÃ§Ä±k olabilir.","DoÄŸru: saÄŸlam iÃ§ mekan korur."] },
    { q:"FÄ±rtÄ±na uyarÄ±sÄ± varken en iyi hazÄ±rlÄ±k nedir?", o:["DÄ±ÅŸarda eÅŸyalarÄ± sabitlemek ve acil Ã§anta hazÄ±rlamak","HiÃ§bir hazÄ±rlÄ±k yapmamak","Denize gitmek"], c:1,
      e:["DoÄŸru: hazÄ±rlÄ±k riskleri azaltÄ±r.","HazÄ±rlÄ±k yapmamak tehlikelidir.","Denize gitmek Ã¶lÃ¼mcÃ¼l risktir."] }
  ]
};

function start(t){
  type=t; index=0; mistakes=[]; locked=false;
  document.getElementById('menu').style.display='none';
  document.getElementById('result').style.display='none';
  document.getElementById('game').style.display='block';
  updateProgress();
  renderScene();
}

function updateProgress(){
  const total = scenes[type].length;
  const pct = Math.round((index/total)*100);
  progressEl().style.width = pct + '%';
}

function renderScene(){
  if(!scenes[type]) return;
  const total = scenes[type].length;
  if(index >= total) return showResults();
  const s = scenes[type][index];
  document.getElementById('q').innerText = 'Soru ' + (index+1) + '/' + total + ': ' + s.q;
  const choicesArea = document.getElementById('choicesArea');
  choicesArea.innerHTML = '';
  document.getElementById('hint').innerText = '';
  s.o.forEach(function(opt,i){
    const b = document.createElement('button');
    b.textContent = opt;
    b.addEventListener('click', function(){
      if(locked) return;
      locked=true;
      setTimeout(function(){ locked=false; },220);
      if(i+1 === s.c){
        correctSound();
        document.getElementById('hint').innerText = 'DoÄŸru âœ”';
      } else {
        wrongSound();
        const why = s.e && s.e[i] ? s.e[i] : 'Bu seÃ§enek doÄŸru deÄŸil.';
        mistakes.push({sceneIndex:index+1, question:s.q, selected:opt, correct:s.o[s.c-1], why:why});
        document.getElementById('hint').innerText = 'YanlÄ±ÅŸ âœ– (aÃ§Ä±klama sonuÃ§ta)';
      }
      index++;
      updateProgress();
      setTimeout(function(){ renderScene(); }, 300);
    });
    choicesArea.appendChild(b);
  });
  updateProgress();
}

function showResults(){
  document.getElementById('game').style.display='none';
  document.getElementById('result').style.display='block';
  document.getElementById('resultTitle').innerText = capitalize(type) + ' Senaryosu TamamlandÄ±';
  let body = '';
  if(mistakes.length === 0){
    body = '<p class="explain">Tebrikler â€” tÃ¼m sahnelerde doÄŸru davrandÄ±n. Bilgilerin yerinde!</p>';
  } else {
    body = '<p class="muted">YanlÄ±ÅŸ yaptÄ±ÄŸÄ±n sahneler (' + mistakes.length + '):</p><ul>';
    mistakes.forEach(function(m){
      body += '<li><b>Sahne ' + m.sceneIndex + ':</b> ' + escapeHtml(m.question) + '<br>' +
        '<span class="wrong">Senin seÃ§imin:</span> ' + escapeHtml(m.selected) + '<br>' +
        '<span class="explain">DoÄŸru olan:</span> ' + escapeHtml(m.correct) + '<br>' +
        '<span class="muted">Neden yanlÄ±ÅŸ:</span> ' + escapeHtml(m.why) + '</li>';
    });
    body += '</ul>';
  }
  document.getElementById('resultBody').innerHTML = body;
  const btns = document.getElementById('resultButtons');
  btns.innerHTML = '';
  const menuBtn = document.createElement('button');
  menuBtn.textContent = 'Ana MenÃ¼';
  menuBtn.onclick = backToMenu;
  btns.appendChild(menuBtn);
  const restartBtn = document.createElement('button');
  restartBtn.textContent = 'Tekrar Oyna';
  restartBtn.onclick = restart;
  btns.appendChild(restartBtn);
  progressEl().style.width = '100%';
}

function capitalize(s){ return s.charAt(0).toUpperCase()+s.slice(1); }
function escapeHtml(s){ return (s+'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }
function backToMenu(){
  document.getElementById('result').style.display='none';
  document.getElementById('game').style.display='none';
  document.getElementById('menu').style.display='block';
  document.getElementById('title').innerText = 'Afet Bilinci Platformu';
  document.getElementById('subtitle').innerText = "Bir senaryo seÃ§ â€” ilerledikÃ§e yanlÄ±ÅŸ yaptÄ±ÄŸÄ±n sahneleri toplayacak, en sonda neden yanlÄ±ÅŸ olduÄŸunu gÃ¶receksin.";
  progressEl().style.width = '0%';
}
function restart(){ start(type); }

function showMainMenu(){
  const choices = document.getElementById('choices');
  choices.innerHTML = '';
  const scenarios = ['deprem','yangin','sel','heyelan','firtina'];
  const icons = ['ğŸŒ‹','ğŸ”¥','ğŸŒŠ','ğŸ—»','ğŸŒªï¸'];
  const names = ['Deprem','YangÄ±n','Sel','Heyelan','FÄ±rtÄ±na'];
  scenarios.forEach(function(sc,idx){
    const btn = document.createElement('button');
    btn.textContent = icons[idx] + ' ' + names[idx];
    btn.onclick = function(){ start(sc); };
    choices.appendChild(btn);
  });
}

window.onload = function(){
  document.getElementById('menu').style.display='block';
  document.getElementById('game').style.display='none';
  document.getElementById('result').style.display='none';
  progressEl().style.width='0%';
  showMainMenu();
};
</script>
</body>
</html>
