<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Hava Afetleri - Afet Bilinci</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0f1724 0%, #1f2937 50%, #0f1724 100%);
      color: #fff;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      transition: background 0.5s ease;
    }

    body.bg-correct {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
    }

    body.bg-wrong {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
    }

    header {
      background: linear-gradient(135deg, #0ea5e9 0%, #38bdf8 100%);
      padding: 18px 24px;
      box-shadow: 0 8px 32px rgba(14, 165, 233, 0.4);
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 2px solid rgba(255,255,255,0.1);
    }
    header h1 { 
      margin: 0; 
      font-size: 24px; 
      font-weight: 700;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    .nav-buttons {
      display: flex;
      gap: 10px;
    }
    .navbtn { 
      background: rgba(11, 18, 32, 0.8);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.2);
      padding: 10px 16px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    .navbtn:hover {
      background: rgba(11, 18, 32, 1);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }

    main { 
      padding: 32px 24px; 
      max-width: 1200px; 
      margin: 0 auto; 
    }

    .intro-text {
      text-align: center;
      font-size: 16px;
      color: #94a3b8;
      margin-bottom: 32px;
      padding: 16px;
      background: rgba(15, 23, 36, 0.6);
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.05);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .tile {
      background: linear-gradient(145deg, rgba(30, 41, 59, 0.8), rgba(15, 23, 42, 0.8));
      padding: 24px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      cursor: pointer;
      transition: all 0.4s ease;
      border: 2px solid transparent;
      position: relative;
    }

    .tile:hover {
      transform: translateY(-12px) scale(1.02);
      border-color: rgba(14, 165, 164, 0.5);
      box-shadow: 0 20px 40px rgba(14, 165, 164, 0.3);
    }

    .tile-icon {
      font-size: 48px;
      margin-bottom: 12px;
      display: block;
    }

    .tile h3 { 
      margin: 8px 0 12px; 
      color: #e0f2fe; 
      font-size: 22px;
      font-weight: 700;
    }

    .tile p { 
      margin: 0; 
      color: #cbd5e1; 
      font-size: 14px; 
      line-height: 1.6;
    }

    .tile.selected {
      border-color: #0ea5a4;
      background: linear-gradient(145deg, rgba(14, 165, 164, 0.2), rgba(15, 23, 42, 0.9));
      box-shadow: 0 20px 40px rgba(14, 165, 164, 0.4);
    }

    #detail {
      margin-top: 32px;
      padding: 28px;
      background: linear-gradient(145deg, rgba(7, 16, 36, 0.95), rgba(15, 23, 36, 0.95));
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.7);
      border: 1px solid rgba(255,255,255,0.08);
      min-height: 300px;
    }

    #detail h2 { 
      margin-top: 0; 
      color: #e6f7ff; 
      font-size: 28px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    .info-card {
      background: rgba(14, 165, 164, 0.1);
      border-left: 4px solid #0ea5a4;
      padding: 16px;
      border-radius: 8px;
      margin: 16px 0;
      color: #e0f2f1;
      line-height: 1.7;
    }

    .btn {
      display: inline-block;
      margin: 12px 12px 0 0;
      background: linear-gradient(135deg, #0ea5a4 0%, #0891b2 100%);
      color: #042027;
      border: none;
      padding: 14px 28px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 700;
      font-size: 16px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(14, 165, 164, 0.4);
    }

    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(14, 165, 164, 0.6);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .btn.secondary { 
      background: linear-gradient(135deg, #1f6feb 0%, #3b82f6 100%);
      color: #fff;
      box-shadow: 0 4px 12px rgba(31, 111, 235, 0.4);
    }

    .game-area { 
      margin-top: 24px; 
      background: linear-gradient(145deg, rgba(7, 17, 38, 0.9), rgba(2, 16, 36, 0.9));
      padding: 28px; 
      border-radius: 16px;
      border: 1px solid rgba(14, 165, 164, 0.3);
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 20px;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #0ea5a4, #22c55e);
      transition: width 0.5s ease;
      box-shadow: 0 0 10px rgba(14, 165, 164, 0.8);
    }

    .q { 
      font-size: 20px; 
      margin-bottom: 24px; 
      color: #e6f7ff; 
      font-weight: 600;
      line-height: 1.6;
      padding: 16px;
      background: rgba(14, 165, 164, 0.05);
      border-radius: 12px;
      border-left: 4px solid #0ea5a4;
    }

    .choice { 
      display: block; 
      width: 100%; 
      text-align: left; 
      margin: 12px 0; 
      padding: 16px 20px; 
      background: linear-gradient(135deg, rgba(9, 34, 58, 0.8), rgba(7, 25, 45, 0.8));
      color: #dbeafe; 
      border-radius: 12px; 
      border: 2px solid rgba(255,255,255,0.1);
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 16px;
      font-weight: 500;
    }

    .choice:hover { 
      transform: translateX(8px);
      background: linear-gradient(135deg, rgba(14, 165, 164, 0.2), rgba(9, 34, 58, 0.9));
      border-color: rgba(14, 165, 164, 0.5);
    }

    .choice:disabled {
      cursor: not-allowed;
      opacity: 0.6;
    }

    .result { 
      font-size: 18px; 
      margin-top: 20px; 
      color: #f1f5f9;
      line-height: 1.8;
    }

    .result ul {
      background: rgba(0,0,0,0.3);
      padding: 20px 20px 20px 40px;
      border-radius: 12px;
      margin-top: 16px;
    }

    .result li {
      margin-bottom: 16px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .score-display {
      display: inline-block;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: white;
      padding: 12px 24px;
      border-radius: 12px;
      font-size: 24px;
      font-weight: 700;
      margin: 16px 0;
      box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);
    }

    .congrats {
      font-size: 48px;
      text-align: center;
      margin: 20px 0;
    }

    @media(max-width: 768px) {
      header h1 { font-size: 18px; }
      .tile h3 { font-size: 18px; }
      .q { font-size: 18px; }
      main { padding: 20px 16px; }
    }
  </style>
</head>
<body>

  <header>
    <h1>ğŸŒªï¸ Hava Afetleri - Yeni Nesil EÄŸitim</h1>
    <div class="nav-buttons">
      <button class="navbtn" id="homeBtn">ğŸ  Ana Sayfa</button>
      <button class="navbtn" id="aboutBtn">â„¹ï¸ HakkÄ±nda</button>
    </div>
  </header>

  <main>
    <div class="intro-text">
      ğŸ¯ <strong>AÅŸaÄŸÄ±dan bir afet tÃ¼rÃ¼ seÃ§:</strong> Bilgi kartÄ±nÄ± okuyarak Ã¶ÄŸren veya "Oyna" butonuyla 5 soruluk interaktif testi baÅŸlat!
    </div>

    <div class="grid" id="tiles">
      <div class="tile" id="tile-kasirga">
        <span class="tile-icon">ğŸŒªï¸</span>
        <h3>KasÄ±rga</h3>
        <p>Åiddetli rÃ¼zgarlar, dÃ¶nen hava kolonlarÄ± ve yÄ±kÄ±cÄ± etkileri hakkÄ±nda bilgiler.</p>
      </div>

      <div class="tile" id="tile-yildirim">
        <span class="tile-icon">âš¡</span>
        <h3>YÄ±ldÄ±rÄ±m FÄ±rtÄ±nasÄ±</h3>
        <p>Elektrik boÅŸalmalarÄ±, gÃ¶k gÃ¼rÃ¼ltÃ¼sÃ¼ ve korunma yÃ¶ntemleri.</p>
      </div>

      <div class="tile" id="tile-dolu">
        <span class="tile-icon">ğŸŒ¨ï¸</span>
        <h3>Åiddetli Dolu</h3>
        <p>BÃ¼yÃ¼k buz parÃ§alarÄ±nÄ±n oluÅŸumu, hasar riskleri ve korunma yollarÄ±.</p>
      </div>
    </div>

    <div id="detail">
      <h2 id="detailTitle">ğŸ® Bir Afet TÃ¼rÃ¼ SeÃ§in</h2>
      <p id="detailText" style="color:#94a3b8; font-size:16px;">YukarÄ±daki kartlardan birini seÃ§erek bilgi alabilir veya oyunu baÅŸlatabilirsiniz.</p>

      <div id="detailButtons"></div>

      <div id="game" class="game-area" style="display:none;">
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill" style="width:0%"></div>
        </div>
        <div id="qbox"></div>
        <div id="choicesBox"></div>
        <div id="after" style="display:none;">
          <div class="result" id="resultText"></div>
          <button class="btn secondary" id="backBtn">ğŸ”™ BaÅŸka Afet SeÃ§</button>
        </div>
      </div>
    </div>
  </main>

<script>
  var data = {
    kasirga: [
      { q: "KasÄ±rga uyarÄ±sÄ± verildiÄŸinde en gÃ¼venli yer neresidir?", opts: ["Bodrum katÄ± veya iÃ§ oda", "Ãœst katlardaki geniÅŸ odalar", "CamlarÄ± olan bir oda"], a: 0, explain: "Bodrum katlarÄ± ve iÃ§ odalar rÃ¼zgardan ve uÃ§an nesnelerden en iyi korunan yerlerdir." },
      { q: "KasÄ±rga sÄ±rasÄ±nda pencerelerden neden uzak durmalÄ±sÄ±nÄ±z?", opts: ["KÄ±rÄ±lan camlar ciddi yaralanmalara neden olabilir", "Pencereler sÄ±cak tutar", "DÄ±ÅŸarÄ±yÄ± gÃ¶rmek tehlikelidir"], a: 0, explain: "KasÄ±rga sÄ±rasÄ±nda kÄ±rÄ±lan pencereler hÄ±zla uÃ§an cam parÃ§alarÄ± oluÅŸturur." },
      { q: "KasÄ±rga yaklaÅŸÄ±rken dÄ±ÅŸarÄ±da kalan eÅŸyalarÄ± ne yapmalÄ±sÄ±nÄ±z?", opts: ["Sabitleyin veya iÃ§eri alÄ±n", "OlduÄŸu gibi bÄ±rakÄ±n", "Ãœzerlerini Ã¶rtÃ¼n"], a: 0, explain: "DÄ±ÅŸarÄ±da kalan eÅŸyalar rÃ¼zgarla uÃ§arak tehlikeli projektil haline gelebilir." },
      { q: "KasÄ±rga sÄ±rasÄ±nda elektrik kesintisi olursa ne yapmalÄ±sÄ±nÄ±z?", opts: ["Acil durum Ã§antanÄ±zdaki feneri kullanÄ±n", "AÃ§Ä±k ateÅŸ kullanÄ±n", "Pencereleri aÃ§Ä±n"], a: 0, explain: "AÃ§Ä±k ateÅŸ yangÄ±n riski oluÅŸturur, acil durum feneri en gÃ¼venli seÃ§enektir." },
      { q: "KasÄ±rga sonrasÄ± dÄ±ÅŸarÄ± Ã§Ä±karken nelere dikkat etmelisiniz?", opts: ["KopmuÅŸ elektrik tellerine ve hasarlÄ± yapÄ±lara dikkat edin", "Hemen normal hayata dÃ¶nÃ¼n", "Sadece yollara bakÄ±n"], a: 0, explain: "KasÄ±rga sonrasÄ± kopan elektrik telleri ve hasarlÄ± yapÄ±lar bÃ¼yÃ¼k risk oluÅŸturur." }
    ],
    yildirim: [
      { q: "YÄ±ldÄ±rÄ±m fÄ±rtÄ±nasÄ± sÄ±rasÄ±nda en gÃ¼venli yer neresidir?", opts: ["KapalÄ± ve saÄŸlam bir bina", "AÃ§Ä±k alan", "AÄŸaÃ§ altÄ±"], a: 0, explain: "KapalÄ± binalar yÄ±ldÄ±rÄ±m Ã§arpmasÄ± riskini bÃ¼yÃ¼k Ã¶lÃ§Ã¼de azaltÄ±r." },
      { q: "YÄ±ldÄ±rÄ±m Ã§arpmasÄ± riskini hesaplamak iÃ§in ne yapabilirsiniz?", opts: ["ÅimÅŸek ile gÃ¶k gÃ¼rÃ¼ltÃ¼sÃ¼ arasÄ±ndaki sÃ¼reyi sayÄ±n", "RÃ¼zgarÄ±n ÅŸiddetine bakÄ±n", "BulutlarÄ±n rengine bakÄ±n"], a: 0, explain: "ÅimÅŸek ve gÃ¶k gÃ¼rÃ¼ltÃ¼sÃ¼ arasÄ±ndaki her 3 saniye 1 km uzaklÄ±ÄŸÄ± gÃ¶sterir." },
      { q: "AÃ§Ä±k alanda yÄ±ldÄ±rÄ±m fÄ±rtÄ±nasÄ±na yakalanÄ±rsanÄ±z ne yapmalÄ±sÄ±nÄ±z?", opts: ["MÃ¼mkÃ¼n olduÄŸunca alÃ§ak bir pozisyon alÄ±n", "Ayakta durun", "KoÅŸarak uzaklaÅŸmaya Ã§alÄ±ÅŸÄ±n"], a: 0, explain: "AlÃ§ak pozisyon yÄ±ldÄ±rÄ±m Ã§arpma riskini azaltÄ±r, koÅŸmak tehlikelidir." },
      { q: "YÄ±ldÄ±rÄ±m fÄ±rtÄ±nasÄ± sÄ±rasÄ±nda hangi aktivitelerden kaÃ§Ä±nmalÄ±sÄ±nÄ±z?", opts: ["Sudan ve metal nesnelerden uzak durun", "YÃ¼rÃ¼yÃ¼ÅŸ yapÄ±n", "AÄŸaÃ§ dikin"], a: 0, explain: "Su ve metal nesneler elektriÄŸi iyi iletir, yÄ±ldÄ±rÄ±m Ã§arpma riskini artÄ±rÄ±r." },
      { q: "YÄ±ldÄ±rÄ±m Ã§arpmasÄ± durumunda ilk yardÄ±m nasÄ±l olmalÄ±dÄ±r?", opts: ["Hemen 112'yi arayÄ±n ve gÃ¼venliyse CPR uygulayÄ±n", "KiÅŸiyi hareket ettirin", "Ãœzerine su dÃ¶kÃ¼n"], a: 0, explain: "YÄ±ldÄ±rÄ±m Ã§arpan kiÅŸi elektrik yÃ¼klÃ¼ deÄŸildir, gÃ¼venle ilk yardÄ±m uygulanabilir." }
    ],
    dolu: [
      { q: "Dolu fÄ±rtÄ±nasÄ± sÄ±rasÄ±nda araÃ§taysanÄ±z ne yapmalÄ±sÄ±nÄ±z?", opts: ["AracÄ± gÃ¼venli bir yere Ã§ekip bekleyin", "HÄ±zla yol almaya devam edin", "AracÄ± terk edin"], a: 0, explain: "AraÃ§ iÃ§inde kalmak doludan korunmak iÃ§in en gÃ¼venli yoldur." },
      { q: "Dolu taneleri ne kadar bÃ¼yÃ¼k olabilir?", opts: ["BazÄ± dolu taneleri tenis topu bÃ¼yÃ¼klÃ¼ÄŸÃ¼ne ulaÅŸabilir", "En fazla bezelye bÃ¼yÃ¼klÃ¼ÄŸÃ¼nde olur", "Sadece pirinÃ§ tanesi kadar olur"], a: 0, explain: "Åiddetli dolu fÄ±rtÄ±nalarÄ±nda tenis topu bÃ¼yÃ¼klÃ¼ÄŸÃ¼nde dolu taneleri oluÅŸabilir." },
      { q: "Dolu fÄ±rtÄ±nasÄ± Ã¶ncesi hangi hazÄ±rlÄ±klar yapÄ±lmalÄ±dÄ±r?", opts: ["AraÃ§larÄ± kapalÄ± alana alÄ±n, camlarÄ± koruyun", "HiÃ§bir ÅŸey yapmaya gerek yok", "Sadece bitkileri Ã¶rtÃ¼n"], a: 0, explain: "AraÃ§larÄ±n ve camlarÄ±n korunmasÄ± dolu hasarÄ±nÄ± Ã¶nlemede kritiktir." },
      { q: "Dolu sÄ±rasÄ±nda dÄ±ÅŸarÄ±da kalan hayvanlar iÃ§in ne yapÄ±lmalÄ±dÄ±r?", opts: ["MÃ¼mkÃ¼nse barÄ±nak saÄŸlayÄ±n", "OlduÄŸu gibi bÄ±rakÄ±n", "Su verin"], a: 0, explain: "Hayvanlar da dolu tanelerinden ciddi ÅŸekilde yaralanabilir." },
      { q: "Dolu fÄ±rtÄ±nasÄ± sonrasÄ± nelere dikkat etmelisiniz?", opts: ["Yollardaki buzlanmaya ve hasarlara dikkat edin", "Hemen dÄ±ÅŸarÄ± Ã§Ä±kÄ±n", "Dolu tanelerini toplayÄ±n"], a: 0, explain: "Dolu sonrasÄ± yollarda buzlanma ve Ã§eÅŸitli hasarlar oluÅŸabilir." }
    ]
  };

  var currentType = null;
  var sceneIndex = 0;
  var score = 0;
  var mistakes = [];
  var isAnswering = false;

  function selectDisaster(type) {
    currentType = type;
    sceneIndex = 0;
    score = 0;
    mistakes = [];
    isAnswering = false;

    var tiles = document.querySelectorAll('.tile');
    for (var i = 0; i < tiles.length; i++) {
      tiles[i].classList.remove('selected');
    }
    document.getElementById('tile-' + type).classList.add('selected');

    var titles = {
      kasirga: "ğŸŒªï¸ KasÄ±rga",
      yildirim: "âš¡ YÄ±ldÄ±rÄ±m FÄ±rtÄ±nasÄ±",
      dolu: "ğŸŒ¨ï¸ Åiddetli Dolu"
    };

    var infos = {
      kasirga: "KasÄ±rga sÄ±rasÄ±nda <strong>bodrum katÄ± veya iÃ§ odalarda</strong> kalÄ±n. Pencerelerden uzak durun ve dÄ±ÅŸarÄ±daki eÅŸyalarÄ± sabitleyin.",
      yildirim: "YÄ±ldÄ±rÄ±m fÄ±rtÄ±nasÄ±nda <strong>kapalÄ± binalarda</strong> kalÄ±n. AÃ§Ä±k alandaysanÄ±z alÃ§ak bir pozisyon alÄ±n ve sudan/metalden uzak durun.",
      dolu: "Dolu fÄ±rtÄ±nasÄ±nda <strong>araÃ§ iÃ§inde veya kapalÄ± alanda</strong> kalÄ±n. AraÃ§larÄ± korunaklÄ± yere alÄ±n ve buzlanmaya dikkat edin."
    };

    document.getElementById('detailTitle').innerHTML = titles[type];
    document.getElementById('detailText').innerHTML = '<div class="info-card">' + infos[type] + '</div>';

    var db = document.getElementById('detailButtons');
    db.innerHTML = '';

    var playBtn = document.createElement('button');
    playBtn.className = 'btn';
    playBtn.innerHTML = 'â–¶ï¸ Oyunu BaÅŸlat';
    playBtn.addEventListener('click', function() {
      startGame(type);
    });
    db.appendChild(playBtn);

    var infoBtn = document.createElement('button');
    infoBtn.className = 'btn secondary';
    infoBtn.innerHTML = 'ğŸ“‹ DetaylÄ± Bilgi';
    infoBtn.addEventListener('click', function() {
      showInfoCard(type);
    });
    db.appendChild(infoBtn);

    document.getElementById('game').style.display = 'none';
    document.getElementById('after').style.display = 'none';
  }

  function showInfoCard(type) {
    var detailedInfo = {
      kasirga: "<h3 style='color:#0ea5a4;'>ğŸ“š KasÄ±rga HakkÄ±nda</h3><p>Åiddetli dÃ¶nen rÃ¼zgar sistemleri, genellikle konvektif fÄ±rtÄ±nalarla iliÅŸkilidir.</p><ul style='text-align:left;'><li><strong>Ã–ncesi:</strong> Bodrum katÄ± hazÄ±rlayÄ±n, acil durum Ã§antasÄ± oluÅŸturun</li><li><strong>SÄ±rasÄ±nda:</strong> Ä°Ã§ odalarda kalÄ±n, pencerelerden uzak durun</li><li><strong>SonrasÄ±:</strong> KopmuÅŸ elektrik tellerine dikkat edin</li></ul>",
      yildirim: "<h3 style='color:#0ea5a4;'>ğŸ“š YÄ±ldÄ±rÄ±m FÄ±rtÄ±nasÄ± HakkÄ±nda</h3><p>Bulut ile yer arasÄ±nda elektrik boÅŸalmasÄ± sonucu oluÅŸan tehlikeli meteorolojik olay.</p><ul style='text-align:left;'><li><strong>Risk:</strong> AÃ§Ä±k alanlar, su kenarlarÄ±, yÃ¼ksek yerler</li><li><strong>Korunma:</strong> KapalÄ± binalarda kalÄ±n, metalden uzak durun</li><li><strong>Ä°lk yardÄ±m:</strong> 112'yi arayÄ±n, CPR uygulayÄ±n</li></ul>",
      dolu: "<h3 style='color:#0ea5a4;'>ğŸ“š Åiddetli Dolu HakkÄ±nda</h3><p>Kuvvetli yukarÄ± hava akÄ±mlarÄ±yla yÃ¼kselen su damlacÄ±klarÄ±nÄ±n donmasÄ±yla oluÅŸan buz parÃ§alarÄ±.</p><ul style='text-align:left;'><li><strong>Tehlike:</strong> BÃ¼yÃ¼k dolu taneleri ciddi hasar verebilir</li><li><strong>Korunma:</strong> KapalÄ± alanlarda kalÄ±n, araÃ§larÄ± koruyun</li><li><strong>SonrasÄ±:</strong> Buzlanmaya ve yoldaki hasarlara dikkat edin</li></ul>"
    };

    document.getElementById('detailText').innerHTML = '<div class="info-card">' + detailedInfo[type] + '</div>';
  }

  function startGame(type) {
    currentType = type;
    sceneIndex = 0;
    score = 0;
    mistakes = [];
    isAnswering = false;

    document.getElementById('game').style.display = 'block';
    document.getElementById('after').style.display = 'none';
    renderScene();
  }

  function renderScene() {
    var scenes = data[currentType];
    if (!scenes) return;

    if (sceneIndex >= scenes.length) {
      return finishGame();
    }

    var scene = scenes[sceneIndex];
    var progress = ((sceneIndex + 1) / scenes.length) * 100;
    document.getElementById('progressFill').style.width = progress + '%';

    var qbox = document.getElementById('qbox');
    qbox.innerHTML = '<div class="q">Soru ' + (sceneIndex + 1) + ' / ' + scenes.length + ': ' + scene.q + '</div>';

    var choicesBox = document.getElementById('choicesBox');
    choicesBox.innerHTML = '';

    for (var i = 0; i < scene.opts.length; i++) {
      var btn = document.createElement('button');
      btn.className = 'choice';
      btn.textContent = scene.opts[i];
      btn.setAttribute('data-index', i);
      btn.addEventListener('click', function() {
        if (!isAnswering) {
          var selectedIndex = parseInt(this.getAttribute('data-index'));
          chooseAnswer(selectedIndex);
        }
      });
      choicesBox.appendChild(btn);
    }
  }

  function chooseAnswer(selectedIndex) {
    if (isAnswering) return;
    isAnswering = true;

    var scene = data[currentType][sceneIndex];
    var isCorrect = (selectedIndex === scene.a);

    var choices = document.querySelectorAll('.choice');
    for (var i = 0; i < choices.length; i++) {
      choices[i].disabled = true;
    }

    var body = document.body;
    if (isCorrect) {
      body.classList.add('bg-correct');
      score++;
    } else {
      body.classList.add('bg-wrong');
      mistakes.push({
        index: sceneIndex + 1,
        q: scene.q,
        selected: scene.opts[selectedIndex],
        correct: scene.opts[scene.a],
        why: scene.explain
      });
    }

    setTimeout(function() {
      body.classList.remove('bg-correct', 'bg-wrong');
      sceneIndex++;
      isAnswering = false;
      renderScene();
    }, 1000);
  }

  function finishGame() {
    document.getElementById('game').style.display = 'block';
    document.getElementById('after').style.display = 'block';
    document.getElementById('qbox').innerHTML = '';
    document.getElementById('choicesBox').innerHTML = '';

    var total = data[currentType].length;
    var res = document.getElementById('resultText');
    var txt = '';

    if (mistakes.length === 0) {
      txt = '<div class="congrats">ğŸ‰</div><div class="score-display">MÃ¼kemmel: ' + score + '/' + total + '</div><p>Tebrikler! TÃ¼m sorular doÄŸru!</p>';
    } else {
      txt = '<div class="score-display">Skor: ' + score + '/' + total + '</div>';
      txt += '<p><strong>YanlÄ±ÅŸ yaptÄ±ÄŸÄ±n sorular:</strong></p><ul style="text-align:left;">';
      for (var i = 0; i < mistakes.length; i++) {
        var m = mistakes[i];
        txt += '<li><b>Soru ' + m.index + ':</b> ' + m.q + '<br>';
        txt += '<span style="color:#ff9999">âŒ Senin cevabÄ±n: ' + m.selected + '</span><br>';
        txt += '<span style="color:#99ff99">âœ… DoÄŸru cevap: ' + m.correct + '</span><br>';
        txt += '<small style="color:#9aa5b1">ğŸ’¡ ' + m.why + '</small></li>';
      }
      txt += '</ul>';
    }
    res.innerHTML = txt;
  }

  function backToSelection() {
    document.getElementById('game').style.display = 'none';
    document.getElementById('after').style.display = 'none';
    document.getElementById('detailTitle').innerHTML = 'ğŸ® Bir Afet TÃ¼rÃ¼ SeÃ§in';
    document.getElementById('detailText').innerHTML = '<p style="color:#94a3b8; font-size:16px;">YukarÄ±daki kartlardan birini seÃ§erek bilgi alabilir veya oyunu baÅŸlatabilirsiniz.</p>';
    document.getElementById('detailButtons').innerHTML = '';

    var tiles = document.querySelectorAll('.tile');
    for (var i = 0; i < tiles.length; i++) {
      tiles[i].classList.remove('selected');
    }

    currentType = null;
    sceneIndex = 0;
    score = 0;
    mistakes = [];
    isAnswering = false;
  }

  document.getElementById('tile-kasirga').addEventListener('click', function() {
    selectDisaster('kasirga');
  });

  document.getElementById('tile-yildirim').addEventListener('click', function() {
    selectDisaster('yildirim');
  });

  document.getElementById('tile-dolu').addEventListener('click', function() {
    selectDisaster('dolu');
  });

  document.getElementById('homeBtn').addEventListener('click', function() {
    window.location.href = 'index.html';
  });

  document.getElementById('aboutBtn').addEventListener('click', function() {
    window.location.href = 'hakkinda.html';
  });

  document.getElementById('backBtn').addEventListener('click', backToSelection);
</script>

</body>
</html>